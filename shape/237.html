<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Niamoto - 79.0</title>
    <link rel="stylesheet" href="../js/vendor/tailwindcss/2.2.19_dist_tailwind.css">
    <link rel="stylesheet" href="../js/vendor/leaflet/1.9.4_leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    
<script src="../js/shape_list.js"></script>

<style>
    #shape-type-list li, #shape-list li {
        list-style: none;
        text-transform: capitalize;
    }

    .shape-type-link, .shape-link {
        display: block;
        padding: 10px;
        border-radius: 5px;
        text-decoration: none;
    }

    .shape-type-link:hover, .shape-link:hover {
        background-color: #f0f0f0;
    }

    .shape-type-link.active, .shape-link.active {
        background-color: #3498db;
        color: #fff;
    }

    #shapeMap, #allShapesMap {
        position: relative;
        height: 300px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #allShapesMap {
        height: 400px;
    }

    .chart-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    .chart-container > div {
        flex: 1 1 calc(33.333% - 10px);
        margin: 5px;
    }
    .custom-tooltip {
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 5px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    font-size: 12px;
    max-width: 300px;
    word-wrap: break-word;
}
</style>

    <style>
        .gauge {
            height: 349px;
        }

        ul {
            list-style-type: none;
        }

        .loader-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <nav class="nav-bg p-4 fixed w-full top-0 shadow-md z-50 custom-nav">
    <div class="container mx-auto flex flex-wrap items-center justify-between">
        <div class="flex items-center flex-shrink-0 text-white mr-6">
            <a id="home-link" class="inline-flex items-center py-2 px-4 text-white no-underline" href="#" data-link="index.html">
                <span class="site-title">Niamoto</span>
            </a>
        </div>

        <div class="block lg:hidden">
            <button id="nav-toggle"
                class="flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white">
                <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <title>Menu</title>
                    <path d="M0 3h20v2H0zm0 6h20v2H0zm0 6h20v2H0z" />
                </svg>
            </button>
        </div>
        <div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block pt-6 lg:pt-0" id="nav-content">
            <ul class="list-reset lg:flex justify-end flex-1 items-center">
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="index.html">
                        <i class="fas fa-home menu-icon"></i>Accueil
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#introduction">Introduction</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#project">Projet</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#objective">Objectifs</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#context">Contexte</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#flora">Flore</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="methodology.html">
                        <i class="fas fa-flask menu-icon"></i>Méthodologie
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#methodes">Nos méthodes</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#faq">FAQ</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="trees.html">
                        <i class="fas fa-leaf menu-icon"></i>Arbres
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#learnTaxon">Étudier les
                arbres</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#taxon">Les arbres de
                Nouvelle-Calédonie</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="plots.html">
                        <i class="fas fa-map-marked-alt menu-icon"></i>Peuplements
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#learnPlot">Étudier les
                            peuplements forestiers</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#plot">Les
                peuplements forestiers de Nouvelle-Calédonie</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="forests.html">
                        <i class="fas fa-tree menu-icon"></i>Forêt
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#learnForest">Étudier les
                forêts</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#forestPN">La forêt de la
                province Nord</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#forestPS">La forêt de la
                province Sud</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="resources.html">
                        <i class="fas fa-book menu-icon"></i>Ressources
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#equipe">L'équipe</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#article">Articles</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#academic">Académique</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#media-production">Médias</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
  document.getElementById('nav-toggle').onclick = function () {
    document.getElementById('nav-content').classList.toggle('hidden');
  };

  // Function to adjust the navigation links based on page depth
  function adjustNavLinks(depth) {
    document.querySelectorAll('a[data-link]').forEach(link => {
      link.href = depth + link.getAttribute('data-link');
    });
  }

  // Adjust the navigation links based on the depth
  adjustNavLinks("../");
</script>

<style>
    .site-title {
        font-family: 'Arial Black', sans-serif; /* Custom font for a bold effect */
        font-size: 2rem; /* Increased font size */
        text-transform: uppercase; /* Uppercase letters for visibility */
        letter-spacing: 2px; /* Spacing between letters */
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7); /* Text shadow for better visibility */
        transition: color 0.3s; /* Smooth transition for hover effect */
    }

    .site-title:hover {
        color: #ffdd57; /* Change color on hover */
    }

    .text-contour {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    }

    .nav-bg {
        background-color: rgba(34, 139, 34, 0.8); /* Fond vert semi-transparent */
        transition: background-color 0.3s;
    }

    .nav-bg:hover {
        background-color: rgba(34, 139, 34, 1); /* Fond vert opaque au survol */
    }

    .group:hover .group-hover\:block {
        display: block;
    }

    .custom-nav {
        z-index: 500;
    }

    .custom-dropdown {
        z-index: 500;
    }

    .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.2); /* Fond blanc transparent au survol */
        border-radius: 4px;
    }

    .menu-icon {
        margin-right: 8px;
    }
</style>
    <div class="flex">
        
<aside class="w-1/4 p-4 mt-28">
    <h2 class="font-semibold text-lg mb-4">Shape Types</h2>
    <ul id="shape-type-list" class="list-disc pl-5">
        <!-- The list of shape types will be generated by JavaScript -->
    </ul>
</aside>

        <div class="w-full">
            
<div id="allShapesMap" class="mt-28"></div>

<div class="rounded overflow-hidden shadow-lg mb-2 mt-8">
    <div class="px-6 py-4">
        <div class="font-bold text-4xl mb-2">79.0</div>
    </div>
</div>

<div class="chart-container">
    <!-- Section for general information -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">General Information</h2>
            
                
                    
                        
                        
                            <p>Shape Area (Total Area): 2305.853926807183</p>
                        
                    
                
                    
                
            
                
                    
                        
                        
                            <p>Forest Area (Forest Area): 1998.8301599013419</p>
                        
                    
                
                    
                
            
                
                    
                        
                        
                            <p>Number of Families (Number of Families): 51</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Number of Species (Number of Species): 147</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Number of Occurrences (Number of Occurrences): 370</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Average Rainfall (Average Rainfall): 1967.631591796875</p>
                        
                    
                
                    
                        
                        
                            <p>Average Rainfall (Rainfall Range): {"min": 1830.0, "max": 2110.0}</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Altitude (Median Altitude): 545.0</p>
                        
                    
                
                    
                        
                        
                            <p>Altitude (Maximum Altitude): 1030.0</p>
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        </div>
    </div>

    <!-- Section for shape map -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">Shape Map</h2>
            <div id="shapeMap" style="height: 400px; position: relative;">
                <div class="loader-container" id="shapeMapLoader">
                    <div class="loader"></div>
                </div>
                <!-- The Leaflet map will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Section for forest map -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">Forest Map</h2>
            <div id="forestMap" style="height: 400px; position: relative;">
                <div class="loader-container" id="forestMapLoader">
                    <div class="loader"></div>
                </div>
                <!-- The Leaflet map will be loaded here -->
            </div>
        </div>
    </div>
</div>

<div class="flex flex-wrap -mx-2">
    

    

    
    
        
    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
    
        
            
            

            
            
                
            
                
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Elevation Distribution</h2>
        
    
    
        <canvas id="elevationDistributionChart"></canvas>
    
    
                        </div>
                    </div>
                
            

    
        
    
        
            
            

            
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Forest Fragment Distribution</h2>
        
    
    
        <canvas id="forestFragmentationChart"></canvas>
    
    
                        </div>
                    </div>
                
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Fragmentation</h2>
        
    
    
        <div class="gauge" id="forest_fragmentationeffective_mesh_sizeGauge"></div>
    
    
                        </div>
                    </div>
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
</div>

        </div>
    </div>
    <footer class="bg-green-700 text-white p-4 mt-8">
        <div class="container mx-auto">
            <div class="flex justify-center mb-4">
                <div class="bg-white p-2 rounded-lg shadow-md flex justify-center">
                    <figure class="mx-2"><img class="img-fluid" src="../files/ps_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/pn_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/amap_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/herbarium_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/iac_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/ird_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/cirad_100.png"></figure>
                </div>
            </div>
            <div class="text-center">
                <p>Niamoto - Portail de la forêt de Nouvelle-Calédonie</p>
                <a class="inline-block py-2 px-4 text-white no-underline" href="https://github.com/niamoto/niamoto" target="_blank">
                    <span class="fab fa-github fa-lg" aria-hidden="true"></span> Github
                </a>
            </div>
        </div>
    </footer>
    <script src="../js/vendor/chart/4.4.2_chart.js"></script>
    <script src="../js/vendor/d3/7.8.5_d3.js"></script>
    <script src="../js/vendor/jquery/3.6.0_jquery.js"></script>
    <script src="../js/vendor/raphael/2.3.0_raphael.js"></script>
    <script src="../js/vendor/justgage/1.6.1_justgage.js"></script>
    <script src="../js/vendor/leaflet/1.9.4_leaflet.js"></script>
    
<script>
    var shape = {"elevation_elevation_distribution": {"altitudes": [287.0, 387.0, 487.0, 587.0, 687.0, 787.0, 887.0, 987.0], "forest": [25.559462918242147, 276.7089681148824, 1202.4060381538263, 371.16785281273377, 80.01223174406238, 17.780495943124972, 10.001528968007797, 3.333842989335932], "non_forest": [1.1112809964453108, 35.560991886249944, 183.36136441347628, 80.01223174406238, 6.667685978671864, 5.556404982226554, 3.333842989335932, 6.667685978671864]}, "elevation_max": 1030.0, "elevation_median": 545.0, "forest_area": "1998.8301599013419", "forest_coordinates": "{\"type\": \"MultiPolygon\", \"coordinates\": [[[[165.13323793750916, -21.17122520915775], [165.13319093409967, -21.17123889138342], [165.13322745536655, -21.171222768320842], [165.13323793750916, -21.17122520915775]]], [[[165.1368512644, -21.167409867900002], [165.1366673184, -21.166928065600004], [165.1371809148, -21.1666981494], [165.13727556839623, -21.16675828495225], [165.1371648474534, -21.167082810743675], [165.1370479206255, -21.167756327172906], [165.1369861115738, -21.167919768739527], [165.1368512644, -21.167409867900002]]], [[[165.10919976167415, -21.16441420923581], [165.10937699003995, -21.164917513206856], [165.10783399688654, -21.163563593544946], [165.10815752081922, -21.163845583952696], [165.10919976167415, -21.16441420923581]]], [[[165.17032020448536, -21.17149385576201], [165.16483216601773, -21.1707133561264], [165.1671952793853, -21.17371364258623], [165.1681986767172, -21.171661921909973], [165.16875163046294, -21.172506306237228], [165.16634950619377, -21.175158376083253], [165.163471768527, -21.1756986085681], [165.1588666199126, -21.173066953499813], [165.16166982370802, -21.17317670001428], [165.162950099746, -21.172408927949302], [165.16341731148242, -21.170661267702], [165.16101811490853, -21.17252052528559], [165.15850930664064, -21.172203896792514], [165.15831736472882, -21.169078970831826], [165.15319252530972, -21.170726288347204], [165.1505354170032, -21.16979202185677], [165.1526099201367, -21.171153679414246], [165.15161818177137, -21.17135294776212], [165.14794084105552, -21.17084451141499], [165.14511123654464, -21.16917442480516], [165.14406997869867, -21.16768997460061], [165.1457884027, -21.167937424499996], [165.1457618902, -21.165848993499996], [165.1447824068, -21.165017895500004], [165.1437382613197, -21.166513734973385], [165.1441739867, -21.162056423999996], [165.1427465511, -21.1596823032], [165.14115925088777, -21.16080686993481], [165.14276202828412, -21.16277281025907], [165.1408893491186, -21.1651088584635], [165.1394063427, -21.165554565199997], [165.1389084215, -21.162909981099997], [165.1373256789, -21.164489089499998], [165.1356671122, -21.1634462001], [165.1345089003, -21.167813372500003], [165.13675936414302, -21.168519356571945], [165.1352475636477, -21.170250266623434], [165.13377807453443, -21.168860119334976], [165.13260925458422, -21.1710176123052], [165.12762365329243, -21.169994867021067], [165.12468559999158, -21.16620350929679], [165.11301518318444, -21.166789853404126], [165.11018355369333, -21.165180361609035], [165.11252370124794, -21.16430286945429], [165.10837056122958, -21.163248679666047], [165.10946695667639, -21.16304067229747], [165.10760223898797, -21.161571375139566], [165.10982689240535, -21.161003866579197], [165.1094004877623, -21.15963221830183], [165.10567183813612, -21.15774685991398], [165.10860315784146, -21.15491369731936], [165.10511606788603, -21.15102781532102], [165.1049527591714, -21.147380693551433], [165.1054337563, -21.1477512281], [165.1076648824, -21.146080202600004], [165.1056100582, -21.146253622800003], [165.10834924069076, -21.142599129624024], [165.11349619768316, -21.14070009940943], [165.11683399806847, -21.141962053140837], [165.11576072603467, -21.14424878825242], [165.1175951028, -21.143517526600004], [165.117098785, -21.142324464000005], [165.11859096785517, -21.144810685929528], [165.1162034782, -21.1470814935], [165.1170550152, -21.1488882282], [165.1156540091, -21.1483269135], [165.1165543227, -21.149938541199997], [165.1186024388195, -21.147279295970257], [165.1230799953, -21.149727371200004], [165.1226538885, -21.152177603699997], [165.1248179266, -21.150885078699996], [165.1234647662863, -21.148789928753434], [165.1239331782613, -21.148233243734666], [165.1263581531, -21.149667580699994], [165.12435247586848, -21.147846324440344], [165.1257023505805, -21.147068732212915], [165.1300392913, -21.148832851700003], [165.1290628732, -21.1442493148], [165.1292727129, -21.146440890299992], [165.1265334477, -21.147229001099994], [165.1277108024, -21.1436995372], [165.1238556155619, -21.142247367491674], [165.1220136626696, -21.140545804641544], [165.1231767349, -21.140977569300002], [165.1230529099, -21.1391473865], [165.1217567211, -21.139544213200004], [165.12135359245391, -21.138157551228186], [165.1229231995, -21.1375926091], [165.12138800371557, -21.136600146850714], [165.1266271277, -21.135117002799994], [165.123391082, -21.133948933900005], [165.12317091781526, -21.13185019443157], [165.1243389398, -21.130244660200002], [165.125190319, -21.131862018900005], [165.1265043153, -21.130920086499998], [165.1234750733, -21.1282945285], [165.12256249150053, -21.12957625139465], [165.12147613799254, -21.126137850392897], [165.12235253278385, -21.124073963321756], [165.12446566549164, -21.124669740015932], [165.1232113336334, -21.122460774847674], [165.12468359100032, -21.120771462246996], [165.12605621034086, -21.120142609432996], [165.1285931902, -21.1244121434], [165.12960489814387, -21.123854733259346], [165.1277785463, -21.122840672900004], [165.12802742396786, -21.11990095619727], [165.13098941254134, -21.120046651608263], [165.1331862288, -21.12514873809999], [165.1350980881245, -21.122800805488517], [165.1356992519, -21.124859867099996], [165.13753575237536, -21.12509070628334], [165.1358355748, -21.126827734000003], [165.1410493290133, -21.12600404915522], [165.14223102806767, -21.127209416476987], [165.1423236618, -21.129975184600003], [165.14685630672875, -21.128726595936033], [165.1470448687, -21.130214997600003], [165.15021679447182, -21.131954128273204], [165.1509371971, -21.1362245079], [165.1473812916, -21.1333932989], [165.1494023685, -21.136386519600002], [165.1473785793, -21.1368358202], [165.151140678, -21.137870997400004], [165.1514404706956, -21.136229637802323], [165.15483459416166, -21.13799205482772], [165.15586661705615, -21.140224837386192], [165.154245368, -21.14019941489999], [165.1559365982322, -21.14249752215497], [165.1537743362, -21.1417127696], [165.15551791138586, -21.144317214804673], [165.15408376751625, -21.1460410206155], [165.1547407441679, -21.150663573286362], [165.14974858930003, -21.1522920671], [165.1511263427, -21.15388587269999], [165.1544127879243, -21.15134602755413], [165.1558817104361, -21.153005199097773], [165.1547355923, -21.154536688399997], [165.1563986613669, -21.153946081165575], [165.15669539584644, -21.15606773251498], [165.1555955715, -21.158081684599992], [165.1553243138, -21.156033640899995], [165.1544507469, -21.157061455700003], [165.15564009540003, -21.159716835], [165.1580862038, -21.1592670414], [165.15681039647615, -21.157330467585012], [165.16094247725871, -21.1579706455034], [165.1590332349555, -21.15988507800898], [165.1625491127, -21.162949163899995], [165.1601788823, -21.165745591500002], [165.1640681327, -21.1648582881], [165.16371617748766, -21.161829273907962], [165.1674161874837, -21.160749358864475], [165.1688016294, -21.1641450492], [165.16839255742582, -21.160591643357222], [165.17220882920176, -21.16192368009035], [165.1697341941, -21.163949040900004], [165.173727763, -21.1634400866], [165.1743215762387, -21.164753311593], [165.1744297460904, -21.165700451727673], [165.17443049856266, -21.16634254137275], [165.1741151494, -21.1651838902], [165.1706532408, -21.165302167899988], [165.1742942288002, -21.167794716517356], [165.17353318580535, -21.169410205735993], [165.1685534417, -21.169136926699995], [165.1722372811, -21.170429891399998], [165.17032020448536, -21.17149385576201]], [[165.1457831571, -21.16882674289999], [165.14571165953367, -21.169336589179007], [165.1466459193, -21.1691186101], [165.1463762362, -21.168568042799997], [165.1457831571, -21.16882674289999]], [[165.1483870171, -21.1669067163], [165.1489075728, -21.167537384899997], [165.1492439441, -21.167485450899996], [165.1491938999, -21.166378155700002], [165.1483870171, -21.1669067163]], [[165.1494137625, -21.166039448599996], [165.1492907203, -21.1653338434], [165.1486614746, -21.166108961399996], [165.1490225394, -21.1662865066], [165.1494137625, -21.166039448599996]], [[165.1542422567, -21.1683530685], [165.153894239, -21.16897303629999], [165.1541819326, -21.169167849500003], [165.1550311763, -21.1682089096], [165.1542422567, -21.1683530685]], [[165.1474697715, -21.16100361859999], [165.1474991547, -21.1597929774], [165.1458975874, -21.161031673399997], [165.1464797259, -21.161847893099996], [165.1474697715, -21.16100361859999]], [[165.1476106749, -21.142713715800003], [165.1472976765, -21.141606645699998], [165.1462643566, -21.141848517599996], [165.1471882169, -21.142237868899997], [165.1476106749, -21.142713715800003]], [[165.1471143435, -21.135550842999997], [165.14751108830004, -21.134781668699997], [165.1467340832, -21.1344323542], [165.1463679464, -21.1352359255], [165.1471143435, -21.135550842999997]], [[165.147586614, -21.155466813899995], [165.1462540973, -21.156317123299996], [165.14641603830003, -21.1592832792], [165.1473487543, -21.156149785799997], [165.1492022219, -21.156371925000002], [165.147586614, -21.155466813899995]], [[165.1486431282, -21.153859384200004], [165.1480187035, -21.153286179600002], [165.1475663209, -21.153504600299993], [165.1491635069, -21.154358090499993], [165.1486431282, -21.153859384200004]], [[165.14677705902915, -21.140436428106316], [165.14768630545544, -21.140473922804315], [165.14883926741868, -21.1400989758244], [165.14685204842513, -21.138899145488672], [165.14677705902915, -21.140436428106316]], [[165.14825809959981, -21.146519942855424], [165.14813889787888, -21.14701583641859], [165.1491986387, -21.146688428599994], [165.1491618512, -21.146596660699995], [165.14825809959981, -21.146519942855424]], [[165.1487935523, -21.145251535400003], [165.1489448546, -21.143656370500008], [165.1477840017, -21.1448163678], [165.1487083081, -21.145630286900005], [165.1510320584, -21.1453470912], [165.1487935523, -21.145251535400003]], [[165.1513467259, -21.14806209289999], [165.1523182988, -21.147212068299996], [165.1516079091, -21.1462889648], [165.1507124612, -21.148328019199997], [165.1513467259, -21.14806209289999]], [[165.1514409362, -21.156507636799997], [165.1532504365, -21.155599480300005], [165.1536835741, -21.154514696900005], [165.1517527493, -21.1548893778], [165.1514409362, -21.156507636799997]], [[165.1535002549, -21.148742918999993], [165.1529806297, -21.148972890200003], [165.1536172281, -21.14948869059999], [165.1539837398, -21.149052306], [165.1535002549, -21.148742918999993]], [[165.1523222951, -21.139155144999993], [165.1528070895, -21.13985689339999], [165.1540177792, -21.1405650431], [165.1540168365, -21.1396527772], [165.1523222951, -21.139155144999993]], [[165.1564263991, -21.162949197999993], [165.1555023922, -21.162565636499995], [165.1549594204, -21.163914449800004], [165.15572391530003, -21.163833422700005], [165.1564263991, -21.162949197999993]], [[165.157347591, -21.1606648142], [165.1577703346, -21.161329971999997], [165.1582161641, -21.16069269180001], [165.15778113729147, -21.160525643417117], [165.157347591, -21.1606648142]], [[165.1660908864, -21.1741482027], [165.1662173513, -21.174006649099997], [165.16546002, -21.173420158400003], [165.1655821711, -21.174891745200007], [165.1660908864, -21.1741482027]], [[165.1668864734, -21.16902382949999], [165.1659566628, -21.168978844200005], [165.1654981807, -21.169231743700003], [165.1662937042, -21.169529313699996], [165.1668864734, -21.16902382949999]], [[165.165908255, -21.1680243095], [165.1668549195, -21.167358832499996], [165.1668924112, -21.1672369846], [165.1661144592, -21.1671245097], [165.165908255, -21.1680243095]], [[165.10827546080003, -21.148894071500003], [165.1070530306, -21.149973504300004], [165.1075427677, -21.150598584399997], [165.1081174143, -21.1502310166], [165.10827546080003, -21.148894071500003]], [[165.1105397613, -21.150740092], [165.10893295520003, -21.153104994599996], [165.1088296045, -21.1539599524], [165.1106942457, -21.152868613299994], [165.11162362236126, -21.149070660602067], [165.1105397613, -21.150740092]], [[165.1125215766259, -21.16306131674182], [165.11218423347194, -21.162330406574878], [165.11084423149921, -21.162274182715894], [165.11101290307622, -21.162705232301512], [165.1125215766259, -21.16306131674182]], [[165.1137662762, -21.14708888639999], [165.1153253907, -21.146502603499993], [165.1153767653944, -21.145226116748425], [165.1144502094, -21.145717155899998], [165.1137662762, -21.14708888639999]], [[165.1167384859, -21.166410837599997], [165.11644446470004, -21.1658774513], [165.1156556037, -21.166130443100005], [165.1161758842, -21.166589087900004], [165.1167384859, -21.166410837599997]], [[165.1160269668, -21.163875344799994], [165.1150050269, -21.163279340700008], [165.116168348, -21.16477030039999], [165.1171284676, -21.1645171877], [165.1160269668, -21.163875344799994]], [[165.1162589457, -21.155461112100006], [165.1158492388, -21.155570406], [165.1159965618, -21.156253070300004], [165.1163695053, -21.156057738500007], [165.1162589457, -21.155461112100006]], [[165.1201125672, -21.155900210199995], [165.1211830571, -21.156065835199993], [165.1182094014, -21.1546507702], [165.1175562206, -21.1562462565], [165.1201125672, -21.155900210199995]], [[165.1193660672, -21.152872429399995], [165.121359767, -21.1514986399], [165.1211013923, -21.149657079199997], [165.1196895055, -21.150805588599997], [165.1187558643, -21.1534684578], [165.1193660672, -21.152872429399995]], [[165.1230485177, -21.163445807499993], [165.1228529847, -21.163686925299995], [165.1236670638, -21.164369096600005], [165.1235809018, -21.163732295200003], [165.1230485177, -21.163445807499993]], [[165.1247257962, -21.157724273499994], [165.1266284653, -21.158279399899993], [165.1233053743, -21.1560097957], [165.1232815645, -21.156801591], [165.1247257962, -21.157724273499994]], [[165.1268439563, -21.167120751500008], [165.1267777617, -21.1684002665], [165.1281572737, -21.16504278149999], [165.1270080956, -21.165932962900005], [165.1268439563, -21.167120751500008]], [[165.1274695377, -21.169071035600005], [165.1279526012, -21.1688755954], [165.128159314, -21.167412373199998], [165.1278353561, -21.167682281499996], [165.1274695377, -21.169071035600005]], [[165.1309994908, -21.1696707773], [165.1316476663, -21.169429298599994], [165.13147605950002, -21.169050756299995], [165.1305283253, -21.169481803699995], [165.1309994908, -21.1696707773]], [[165.1271844115, -21.157521630399994], [165.1275264422, -21.156953358499997], [165.1255694846, -21.156075256200012], [165.1258136257, -21.156673501999997], [165.1271844115, -21.157521630399994]], [[165.1296740032, -21.150755202700008], [165.1280954874, -21.150102326799992], [165.1278755256, -21.150354944200004], [165.13002658882843, -21.151222952309478], [165.1297402259, -21.149544534299995], [165.1296740032, -21.150755202700008]], [[165.1287502299, -21.164623492699995], [165.1299366381, -21.164364397499998], [165.1299352208, -21.1627406817], [165.128522328, -21.162787660999996], [165.1287502299, -21.164623492699995]], [[165.1303965892, -21.1587527523], [165.13233766410002, -21.159469869500008], [165.1310991195, -21.157776831299998], [165.1286342653, -21.1578360981], [165.1278398363, -21.1586913891], [165.1303965892, -21.1587527523]], [[165.1285171436, -21.153237563900003], [165.1287149273, -21.155627091399992], [165.1315112003, -21.156898671099995], [165.1290567911, -21.154878084599996], [165.1289445624, -21.1524110355], [165.1285171436, -21.153237563900003]], [[165.1311136077, -21.139491326799995], [165.1284351125, -21.139671243000002], [165.1275736711, -21.1406816997], [165.1296041982, -21.1408178585], [165.1292690545, -21.1422238096], [165.1311136077, -21.139491326799995]], [[165.1251714669, -21.12397291490001], [165.1250929583, -21.1251491691], [165.1264400547, -21.125000427500005], [165.12507282840002, -21.1230205555], [165.1251714669, -21.12397291490001]], [[165.1250501707, -21.121523073199995], [165.1244572408, -21.121781699200003], [165.1266594757, -21.122801350299998], [165.1254962206, -21.1211211153], [165.1250501707, -21.121523073199995]], [[165.13284777872522, -21.148694635338924], [165.13171356411098, -21.14777601523813], [165.13101991219813, -21.14798223607708], [165.13257594216478, -21.149022713946334], [165.13284777872522, -21.148694635338924]], [[165.131885943, -21.131116795900002], [165.1357629227, -21.1309875072], [165.1329541035, -21.128855371000004], [165.1277269349, -21.1304085282], [165.131885943, -21.131116795900002]], [[165.1325104727, -21.131982676499995], [165.132144153, -21.132659991999994], [165.1333113804, -21.1317582842], [165.1328833184, -21.131770095599997], [165.1325104727, -21.131982676499995]], [[165.1332458245, -21.13367467269999], [165.1317818948, -21.133375150599996], [165.13323814043576, -21.135089154928774], [165.1342926218, -21.134855778099997], [165.1332458245, -21.13367467269999]], [[165.1302914712, -21.1224715566], [165.13056504533156, -21.123631153560705], [165.13167182891183, -21.123835182275815], [165.1304930484, -21.122224687099997], [165.1297178475, -21.122266720100004], [165.1302914712, -21.1224715566]], [[165.131241608, -21.128584173299995], [165.1323348571, -21.12703992479999], [165.1306694673, -21.124671613099995], [165.131527605, -21.126977440399997], [165.130116048, -21.128166201099994], [165.131241608, -21.128584173299995]], [[165.1390112464, -21.161670593499995], [165.1385097005, -21.161682479899998], [165.1388712724, -21.162428060400003], [165.1395004194, -21.161509540499996], [165.1390112464, -21.161670593499995]], [[165.1393440627, -21.157830486899996], [165.1388054143, -21.157394878199995], [165.1385495197, -21.1584622662], [165.1388187274, -21.158553845900002], [165.1393440627, -21.157830486899996]], [[165.1388442598, -21.153137606899996], [165.138354927, -21.153097845000005], [165.1377612583, -21.1526680151], [165.1383368715, -21.1534134234], [165.1388442598, -21.153137606899996]], [[165.1396346771, -21.1513984877], [165.1400440905, -21.151007998], [165.1395998275, -21.150572547400007], [165.1390776279, -21.1508825693], [165.1396346771, -21.1513984877]], [[165.1396288226, -21.148414980600002], [165.1390362774, -21.149172821400008], [165.1400395653, -21.149447395499998], [165.1397640312, -21.1491148469], [165.1396288226, -21.148414980600002]], [[165.1385935284, -21.1367342241], [165.1391346695, -21.138606600000006], [165.13948134560002, -21.139093820499998], [165.13920592975805, -21.13644587717098], [165.1385935284, -21.1367342241]], [[165.1415149703, -21.1509608744], [165.1412034678, -21.151402923800003], [165.1420171909, -21.151694856599992], [165.1416805034, -21.1513795751], [165.1415149703, -21.1509608744]], [[165.1426501096, -21.148395248999996], [165.1415126866, -21.148556854299994], [165.1414639982, -21.148809346099995], [165.1434580456, -21.149042906399995], [165.1426501096, -21.148395248999996]], [[165.1427513448, -21.134305942099992], [165.14350109300003, -21.133408105699992], [165.1434089704, -21.1330008189], [165.1420861014, -21.135130469099995], [165.1427513448, -21.134305942099992]], [[165.1455682308, -21.149201755600004], [165.1461006237, -21.1495053856], [165.1440867032, -21.1477055296], [165.1450358737, -21.148932548999994], [165.1455682308, -21.149201755600004]], [[165.1438259529, -21.143686615000004], [165.1453724062, -21.142818927799993], [165.1422546711, -21.14285571389999], [165.143611485, -21.143256482499996], [165.1438259529, -21.143686615000004]], [[165.1438502659, -21.137194580699997], [165.1443149191, -21.137062222199997], [165.1442894629, -21.136035225799997], [165.1422904173, -21.138003184599995], [165.1438502659, -21.137194580699997]], [[165.1433507285, -21.1392088774], [165.14251347000004, -21.139817762199993], [165.1460832991, -21.14191200739999], [165.144226356, -21.140338427099998], [165.1443588835, -21.13825559109999], [165.1433507285, -21.1392088774]], [[165.1437371602, -21.146739053899996], [165.14255890550513, -21.146538690204416], [165.1436706651, -21.147548101199998], [165.14676768535466, -21.14717272291487], [165.1437371602, -21.146739053899996]], [[165.1453158014, -21.131805786700003], [165.1451843757, -21.131512010099996], [165.1440509065, -21.132816673099995], [165.1450743077, -21.133074342399997], [165.1453158014, -21.131805786700003]], [[165.133970017, -21.1603449908], [165.1340916234, -21.159541642], [165.1331349762, -21.16004056359999], [165.1333890892, -21.160500362699995], [165.133970017, -21.1603449908]], [[165.13896486450002, -21.128337037600005], [165.13773076358254, -21.128800030222095], [165.13790370815283, -21.129361625092873], [165.1386046983, -21.129014361999996], [165.13896486450002, -21.128337037600005]], [[165.1401380509, -21.127349214699997], [165.1416478626, -21.126688142200003], [165.13779865362687, -21.127645625836063], [165.1399426681, -21.1276706783], [165.1401380509, -21.127349214699997]], [[165.13662343, -21.129079084399997], [165.137271415315, -21.12944364815465], [165.13647079843255, -21.127939539724867], [165.1363294595, -21.128597367999994], [165.13662343, -21.129079084399997]]], [[[165.1054755852, -21.1463627197], [165.1054511459, -21.146397160100005], [165.10541854771094, -21.14641448368394], [165.10547332395348, -21.146337466417908], [165.1054755852, -21.1463627197]]], [[[165.1262687015, -21.1451522137], [165.1263177889, -21.1453415155], [165.12627811998144, -21.145844475216112], [165.12602302043558, -21.144770236479726], [165.1262687015, -21.1451522137]]], [[[165.12168650937517, -21.135299418899343], [165.12187324272625, -21.13495317106985], [165.12184538585348, -21.13532157830176], [165.12168650937517, -21.135299418899343]]], [[[165.1437651858, -21.128238362699992], [165.14374660786734, -21.128204358415967], [165.1439129318482, -21.12825923765093], [165.1437651858, -21.128238362699992]]], [[[165.1400844637, -21.1256366037], [165.13821363130003, -21.126045505399993], [165.137772985, -21.125655711599997], [165.13864023789938, -21.125114966712268], [165.1400844637, -21.1256366037]]], [[[165.1381332691, -21.125110351999997], [165.1380782337, -21.125110396899988], [165.1380400707124, -21.125090296326924], [165.13814367756848, -21.12509077771766], [165.1381332691, -21.125110351999997]]], [[[165.1225480515, -21.1238772943], [165.12246042586574, -21.12393516325313], [165.12284385147308, -21.1234701503091], [165.1229331875, -21.1237450518], [165.1225480515, -21.1238772943]]], [[[165.133948487, -21.122784270099995], [165.1331591207, -21.122182450299995], [165.13332979, -21.12156839899999], [165.13424573779204, -21.122425126101817], [165.133948487, -21.122784270099995]]], [[[165.1326324822, -21.121333706900003], [165.132124677, -21.12103001379999], [165.1319675497273, -21.120373509819892], [165.13320844265058, -21.121220559326314], [165.1326324822, -21.121333706900003]]], [[[165.127287103, -21.120207509999997], [165.1269204612, -21.1205003998], [165.1265412087, -21.12034576969999], [165.1277247451178, -21.1199011860057], [165.127287103, -21.120207509999997]]], [[[165.17236549, -21.170217473199997], [165.172450661, -21.16981576119999], [165.1733229913445, -21.169681458565282], [165.17253622003116, -21.170382174713183], [165.17236549, -21.170217473199997]]], [[[165.1727727666, -21.1627468261], [165.17291920702255, -21.16243890729483], [165.17320069239307, -21.16272782503355], [165.1729563307, -21.162804013700004], [165.1727727666, -21.1627468261]]], [[[165.16359792072308, -21.161887632579038], [165.1635816942, -21.161926892000004], [165.1635047601674, -21.161938070584817], [165.16359792072308, -21.161887632579038]]], [[[165.1630619447, -21.1620708314], [165.162908516, -21.161600503399995], [165.1632853113521, -21.161343345743894], [165.16350129139974, -21.161939948608424], [165.1630619447, -21.1620708314]]], [[[165.1629385524, -21.161101311000007], [165.1625167697, -21.161336954600003], [165.1619537312, -21.16104488139999], [165.1630561682889, -21.16043639430203], [165.1629385524, -21.161101311000007]]], [[[165.16753640993733, -21.16072680296115], [165.1674827312, -21.16074975469999], [165.1674521414178, -21.160742613257163], [165.16753640993733, -21.16072680296115]]], [[[165.1628887917, -21.160344007499997], [165.1628579018, -21.160062899100005], [165.1621421184, -21.159920148799994], [165.16276578511648, -21.159845633129375], [165.1630256418828, -21.160359860861902], [165.1628887917, -21.160344007499997]]], [[[165.1623984055, -21.159599319500003], [165.16123015, -21.159353006499998], [165.16134052846985, -21.15822093233289], [165.16269881534203, -21.15971310737012], [165.1623984055, -21.159599319500003]]], [[[165.14993727550572, -21.131219428895147], [165.1499077864, -21.131187869099993], [165.14990775108438, -21.13115273190638], [165.14993727550572, -21.131219428895147]]], [[[165.1495709447, -21.130689001399997], [165.14961328430766, -21.130658245550983], [165.14985078320572, -21.131024038919605], [165.14965679460002, -21.130924164399993], [165.1495709447, -21.130689001399997]]], [[[165.1486100984, -21.129938229999997], [165.1478884945, -21.129933123999994], [165.1477898203699, -21.12906723604963], [165.14933948029224, -21.13027456252075], [165.1486100984, -21.129938229999997]]], [[[165.1476613557, -21.129049741699998], [165.1475023094, -21.1289982424], [165.1474832889579, -21.128948420388408], [165.14778828787377, -21.12906664203371], [165.1476613557, -21.129049741699998]]], [[[165.1443595236692, -21.12850138931944], [165.1441873322, -21.128444555199994], [165.14412057218757, -21.12837110859983], [165.1443595236692, -21.12850138931944]]], [[[165.1440922723925, -21.12835567903379], [165.1440710551, -21.1283528536], [165.14403995758698, -21.128327156044673], [165.1440922723925, -21.12835567903379]]]]}", "forest_cover_percentage": null, "forest_fragmentation_effective_mesh_size": 19.98830159901342, "forest_fragmentation_fragment_size_distribution": {"10": 0.0, "100": 0.0, "1000": 0.0, "1100": 0.0, "1200": 0.0, "12000": 100.0, "125": 0.0, "1300": 0.0, "1400": 0.0, "150": 0.0, "1500": 0.0, "1600": 0.0, "1700": 0.0, "17000": 100.0, "175": 0.0, "1800": 0.0, "1900": 0.0, "20": 0.0, "200": 0.0, "2000": 100.0, "225": 0.0, "250": 0.0, "27000": 100.0, "275": 0.0, "30": 0.0, "300": 0.0, "325": 0.0, "350": 0.0, "375": 0.0, "40": 0.0, "400": 0.0, "425": 0.0, "450": 0.0, "475": 0.0, "50": 0.0, "500": 0.0, "500000": 100.0, "60": 0.0, "600": 0.0, "70": 0.0, "700": 0.0, "7000": 100.0, "80": 0.0, "800": 0.0, "90": 0.0, "900": 0.0}, "forest_humidity_category_distribution": null, "frequencies": {}, "id": 237, "land_use_category_distribution": null, "name": "79.0", "num_families_unique_taxonomic_count": 51, "num_occurrences_count": 370, "num_species_unique_taxonomic_count": 147, "rainfall_mean": "1967.631591796875", "rainfall_range": "{\"min\": 1830.0, \"max\": 2110.0}", "shape_area": "2305.853926807183", "shape_coordinates": "{\"type\": \"FeatureCollection\", \"features\": [{\"id\": \"0\", \"type\": \"Feature\", \"properties\": {}, \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[165.10583723282284, -21.145825798130677], [165.10834924069076, -21.142599129624024], [165.11349619768316, -21.14070009940943], [165.1174583492514, -21.14264542252822], [165.1184534152874, -21.14721985168813], [165.12140432397692, -21.14978897914352], [165.1267968046521, -21.146813047876275], [165.1261221805844, -21.14281061447506], [165.12156636816565, -21.139608177016523], [165.12143648164982, -21.136112893049052], [165.12414076430028, -21.130731421038323], [165.12147613799254, -21.126137850392897], [165.12468359100032, -21.120771462246996], [165.13118525671527, -21.1200821553677], [165.13714741912943, -21.125108179796275], [165.1492871651351, -21.130201253011414], [165.15039002395923, -21.135778744607233], [165.15572191558925, -21.13954583381471], [165.15423563407296, -21.151640576608592], [165.15633507069634, -21.153764592682545], [165.15667692724264, -21.157314740288644], [165.1613544778196, -21.15822970341164], [165.16334440289086, -21.162024889530688], [165.17121091235487, -21.161208792552014], [165.1740040983371, -21.163848499204267], [165.17423238485995, -21.16809294730683], [165.16713404370134, -21.174665574319015], [165.163471768527, -21.1756986085681], [165.1591260122396, -21.17352371318289], [165.15831736472882, -21.169078970831826], [165.1515751051362, -21.17135696625218], [165.14584419981637, -21.169744071006374], [165.14362741041663, -21.166113124971403], [165.1441173410345, -21.161812660202656], [165.1408893491186, -21.1651088584635], [165.13742901607924, -21.165998753018684], [165.1363302429565, -21.169221822579463], [165.13296631860663, -21.171304274722598], [165.12762365329243, -21.169994867021067], [165.12468559999158, -21.16620350929679], [165.11301518318444, -21.166789853404126], [165.10827004766747, -21.164063717537694], [165.10601183091768, -21.15941193951363], [165.1073965391568, -21.153295871542277], [165.10483712205772, -21.150174394563756], [165.10583723282284, -21.145825798130677]]]}, \"bbox\": [165.10483712205772, -21.1756986085681, 165.17423238485995, -21.1200821553677]}], \"bbox\": [165.10483712205772, -21.1756986085681, 165.17423238485995, -21.1200821553677]}", "shape_id": 237, "type": "hotspots"};
    var mapping = {"fields": {"elevation": {"data_source": {"name": "elevation", "type": "layer"}, "description": "Altitude metrics within the shape", "field_type": "JSON", "label": "Altitude", "transformations": [{"chart_options": {"title": "Median Altitude"}, "chart_type": "text", "name": "median"}, {"chart_options": {"title": "Maximum Altitude"}, "chart_type": "text", "name": "max"}, {"chart_options": {"title": "Elevation Distribution", "x_label": "Elevation (m)", "y_label": "Area (ha)"}, "chart_type": "stacked_bar", "data_structure": {"x_field": "altitudes", "y_fields": [{"color": "#4BC0C0", "label": "For\u00eat", "name": "forest"}, {"color": "#FF6384", "label": "Hors-for\u00eat", "name": "non_forest"}]}, "name": "elevation_distribution"}]}, "forest": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Area covered by forest within the shape", "field_type": "TEXT", "label": "Forest Area", "transformations": [{"chart_options": {"title": "Forest Area"}, "chart_type": "text", "name": "area"}, {"chart_options": {"coordinates_field": "forest_coordinates", "title": "Forest Location"}, "chart_type": "map", "name": "coordinates"}]}, "forest_cover": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Area covered by forest within the shape", "field_type": "JSON", "label": "Forest Area", "transformations": [{"chart_options": {"categories": ["UM", "Non-UM", "Commune"], "title": "Forest Cover"}, "chart_type": "donut", "layer_params": {"forest_cover": [{"name": "area"}, {"attribute": "cover_type"}], "soil_types": [{"attribute": "soil_category"}]}, "name": "percentage"}]}, "forest_fragmentation": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Analysis of forest fragmentation", "field_type": "JSON", "label": "Forest Fragmentation", "transformations": [{"chart_options": {"bins": [10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 125, 150, 175, 200, 225, 250, 275, 300, 325, 350, 375, 400, 425, 450, 475, 500, 600, 700, 800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 7000, 12000, 17000, 27000, 500000], "title": "Forest Fragment Distribution", "x_label": "Area (ha)", "y_label": "Cumulative Area (%)"}, "chart_type": "line", "data_structure": {"color": "#4BC0C0", "x_field": "keys", "y_field": "values"}, "name": "fragment_size_distribution"}, {"chart_options": {"label": "Effective Mesh Size (km\u00b2)", "max": 1000, "min": 0, "title": "Fragmentation"}, "chart_type": "gauge", "name": "effective_mesh_size"}]}, "forest_humidity": {"data_source": [{"name": "forest_cover", "type": "layer"}, {"name": "holdridge", "type": "shape"}], "description": "Distribution of forests by humidity level", "field_type": "JSON", "label": "Forest and Living Environments", "transformations": [{"chart_options": {"categories": ["Dry", "Humid", "Very Humid"], "title": "Forest and Living Environments", "x_label": "Category", "y_label": "Frequency (%)"}, "chart_type": "stacked_bar", "layer_params": {"forest_cover": [{"name": "area"}], "humidity": [{"name": "value"}]}, "name": "category_distribution"}]}, "land_use": {"data_source": [{"name": "ultramafic", "type": "shape"}, {"name": "holdridge", "type": "shape"}, {"name": "forest_cover", "type": "layer"}], "description": "Land use distribution", "field_type": "JSON", "label": "Land Use", "transformations": [{"chart_options": {"title": "Land Use", "x_label": "Category", "y_label": "Area (ha)"}, "chart_type": "bar", "name": "category_distribution"}]}, "num_families": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of families in the zone", "field_type": "INTEGER", "label": "Number of Families", "transformations": [{"chart_options": {"title": "Number of Families"}, "chart_type": "text", "name": "unique_taxonomic_count", "target_ranks": ["family"]}]}, "num_occurrences": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of occurrences in the zone", "field_type": "INTEGER", "label": "Number of Occurrences", "source_field": "id_occurrence", "transformations": [{"chart_options": {"title": "Number of Occurrences"}, "chart_type": "text", "name": "count"}]}, "num_species": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of species in the zone", "field_type": "INTEGER", "label": "Number of Species", "transformations": [{"chart_options": {"title": "Number of Species"}, "chart_type": "text", "name": "unique_taxonomic_count", "target_ranks": ["species", "infra"]}]}, "rainfall": {"data_source": {"name": "rainfall", "type": "layer"}, "description": "Average annual rainfall within the shape", "field_type": "TEXT", "label": "Average Rainfall", "transformations": [{"chart_options": {"title": "Average Rainfall"}, "chart_type": "text", "name": "mean"}, {"chart_options": {"title": "Rainfall Range"}, "chart_type": "text", "name": "range"}]}, "shape": {"data_source": {"name": "self", "type": "shape"}, "description": "Total area of the reference zone", "field_type": "TEXT", "label": "Shape Area", "transformations": [{"chart_options": {"title": "Total Area"}, "chart_type": "text", "name": "area"}, {"chart_options": {"coordinates_field": "shape_coordinates", "title": "Location"}, "chart_type": "map", "name": "coordinates"}]}}, "group_by": "shape", "source_location_field": "geo_pt", "source_table_name": "occurrences"};
    var currentShapeType = "hotspots";

    document.addEventListener('DOMContentLoaded', function () {
        loadShapeCharts(shape, mapping);
        loadShapeTypeList();
        initShapeMaps(mapping, shape);
        loadAllShapesMap(shape);
    });

    function loadShapeCharts(shape, mapping) {
        Object.entries(mapping.fields).forEach(function([field_key, field]) {
            if (field.field_type !== 'TEXT' && shape[field_key] !== null) {
                // Handle bins chart if present
                if (field.bins && field.bins.values && field.bins.values.length > 0) {
                    var binChartId = field_key + 'BinChart';
                    var binCtx = document.getElementById(binChartId);
                    if (binCtx) {
                        createBinChart(binCtx, field, shape);
                    }
                }

                // Handle transformations
                field.transformations.forEach(function(transformation) {
                    var transformationName = transformation.name ? transformation.name : '';
                    var valueKey = field_key + '_' + transformationName;

                    if (shape[valueKey] !== null) {
                        switch(transformation.chart_type) {
                            case 'pie':
                                var pieChartId = field_key + 'PieChart';
                                var pieCtx = document.getElementById(pieChartId);
                                if (pieCtx) {
                                    createPieChart(pieCtx, transformation, shape[valueKey]);
                                }
                                break;
                            case 'gauge':
                                var gaugeId = field_key + transformationName + 'Gauge';
                                var gaugeElement = document.getElementById(gaugeId);
                                if (gaugeElement) {
                                    createGauge({
                                        id: gaugeId,
                                        value: parseFloat(shape[valueKey]),
                                        min: 0,
                                        max: transformation.chart_options.max,
                                        title: transformation.chart_options.title,
                                        label: transformation.chart_options.label
                                    });
                                }
                                break;
                            case 'bar':
                                var barChartId = field_key + transformationName + 'BarChart';
                                var barCtx = document.getElementById(barChartId);
                                if (barCtx) {
                                    createBarChart(barCtx, field, transformation, shape[valueKey]);
                                }
                                break;
                            case 'stacked_bar':
                                if (field_key === 'elevation' && transformationName === 'elevation_distribution') {
                                    var stackedBarChartId = 'elevationDistributionChart';
                                    var stackedBarCtx = document.getElementById(stackedBarChartId);
                                    if (stackedBarCtx) {
                                        createElevationDistributionChart(stackedBarCtx, shape.elevation_elevation_distribution, transformation);
                                    }
                                }
                                break;
                            case 'line':
                                if (field_key === 'forest_fragmentation' && transformationName === 'fragment_size_distribution') {
                                    var lineChartId = 'forestFragmentationChart';
                                    var lineCtx = document.getElementById(lineChartId);
                                    if (lineCtx) {
                                        createForestFragmentationChart(lineCtx, shape.forest_fragmentation_fragment_size_distribution, transformation);
                                    }
                                }
                                break;
                        }
                    }
                });
            }
        });
    }

    function createBinChart(ctx, field, shape) {
        var binData = {
            labels: field.bins.values,
            datasets: [{
                label: field.label,
                data: field.bins.values.map(value => shape.frequencies[field.field_key][value] || 0),
                backgroundColor: field.bins.chart_options.color
            }]
        };

        new Chart(ctx, {
            type: field.bins.chart_type,
            data: binData,
            options: field.bins.chart_options
        });
    }

    function createPieChart(ctx, transformation, data) {
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['True', 'False'],
                datasets: [{
                    data: [data.true || 0, data.false || 0],
                    backgroundColor: ['#FF6384', '#36A2EB']
                }]
            },
            options: {
                title: {
                    display: true,
                    text: transformation.chart_options.title
                }
            }
        });
    }

    function createBarChart(ctx, field, transformation, data) {
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    label: field.label,
                    data: Object.values(data),
                    backgroundColor: getColor(0).background,
                    borderColor: getColor(0).border,
                    borderWidth: 1
                }]
            },
            options: transformation.chart_options
        });
    }

    function createElevationDistributionChart(ctx, elevationData, chartConfig) {
        const altitudes = elevationData.altitudes.reverse();
        const forestData = elevationData.forest.reverse();
        const nonForestData = elevationData.non_forest.reverse();

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: altitudes,
                datasets: [
                    {
                        label: 'Forest',
                        data: forestData,
                        backgroundColor: '#4CAF50',
                        stack: 'Stack 0',
                    },
                    {
                        label: 'Non-Forest',
                        data: nonForestData,
                        backgroundColor: '#FFF59D',
                        stack: 'Stack 0',
                    }
                ]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                scales: {
                    x: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Area (ha)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString(); // Format les grands nombres
                            }
                        }
                    },
                    y: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Elevation (m)'
                        },
                        reverse: false
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                },
                layout: {
                    padding: {
                        left: 10,
                        right: 10,
                        top: 0,
                        bottom: 10
                    }
                }
            }
        });
    }

    function createForestFragmentationChart(ctx, fragmentationData, chartConfig) {
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: Object.keys(fragmentationData),
                datasets: [{
                    label: 'Cumulative Area (%)',
                    data: Object.values(fragmentationData),
                    borderColor: '#4BC0C0',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: chartConfig.chart_options.x_label
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: chartConfig.chart_options.y_label
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: chartConfig.chart_options.title
                    }
                }
            }
        });
    }

    function createGauge(options) {
        new JustGage({
            id: options.id,
            value: options.value || 0,
            min: options.min || 0,
            max: options.max,
            title: options.title,
            label: options.label,
            pointer: true,
            pointerOptions: {
                toplength: 10,
                bottomlength: 10,
                bottomwidth: 2,
                color: '#8e8e93',
                stroke: '#ffffff',
                stroke_width: 3,
                stroke_linecap: 'round'
            },
            gaugeWidthScale: 0.6,
            counter: true,
            donut: true,
            relativeGaugeSize: true,
            donutStartAngle: 270,
            hideInnerShadow: true,
            customSectors: [{
                color: "#ff0000",
                lo: 0,
                hi: options.max * 0.33
            }, {
                color: "#ffff00",
                lo: options.max * 0.33,
                hi: options.max * 0.66
            }, {
                color: "#00ff00",
                lo: options.max * 0.66,
                hi: options.max
            }],
            humanFriendly: true,
            formatNumber: true,
            textRenderer: function (val) {
                return parseFloat(val).toFixed(2);
            }
        });
    }

    // Function to get a color based on the index
    function getColor(index) {
        var colors = [
            {background: 'rgba(54, 162, 235, 0.6)', border: 'rgba(54, 162, 235, 1)'},
            {background: 'rgba(75, 192, 192, 0.6)', border: 'rgba(75, 192, 192, 1)'},
            {background: 'rgba(255, 99, 132, 0.6)', border: 'rgba(255, 99, 132, 1)'}
        ];
        return colors[index % colors.length];
    }

// Rest of the code (loadShapeTypeList, initShapeMaps, loadAllShapesMap) remains the same...

    let maps = {};  // Object to keep track of initialized maps

    function initMap(field_key, geometry) {
        const mapId = field_key + 'Map';
        const mapLoaderId = field_key + 'MapLoader';

        // Check if the map already exists
        if (maps[mapId]) {
            return; // Map is already initialized, so do nothing
        }

        const satellite = L.tileLayer.wms("https://carto10.gouv.nc/arcgis/services/fond_imagerie/MapServer/WMSServer", {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const carte = L.tileLayer.wms('https://carto.gouv.nc/arcgis/services/fond_cartographie/MapServer/WMSServer', {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const map = L.map(mapId, {
            layers: [carte, satellite],
            scrollWheelZoom: false
        });
        map.attributionControl.setPrefix(false); // Remove the "Powered by Leaflet" prefix
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        const baseMaps = {
            "Carte": carte,
            "Satellite": satellite,
        };

        L.control.layers(baseMaps).addTo(map);

        map.on('load', function () {
            document.getElementById(mapLoaderId).style.display = 'none';
        });

        if (geometry) {
            const geoJsonLayer = L.geoJSON(geometry, {
                style: function() {
                    return {
                        color: '#228b22', // Border color
                        weight: 2,       // Border width
                        fillColor: '#228b22cc', // Fill color with opacity
                        fillOpacity: 0.8 // Fill opacity
                    };
                }
            }).addTo(map);
            map.fitBounds(geoJsonLayer.getBounds());
        } else {
            console.warn("No geographic coordinates found.");
            // Set default view if no geometry is found
            map.setView([-21.291237, 165.516418], 10);
        }

        // Store the map instance in the maps object
        maps[mapId] = map;
    }

    function initShapeMaps(mapping, shape) {
        Object.entries(mapping.fields).forEach(function([field_key, field]) {
            field.transformations.forEach(function(transformation) {
                if (transformation.chart_type === 'map') {
                    var coordinatesField = transformation.chart_options.coordinates_field;
                    var geometry = shape[coordinatesField];

                    // Check if geometry is a string, if so, parse it as JSON
                    if (typeof geometry === 'string') {
                        try {
                            geometry = JSON.parse(geometry);
                        } catch (e) {
                            console.error("Invalid JSON for field", coordinatesField, ":", geometry);
                            return; // Skip this field if JSON is invalid
                        }
                    }

                    // Initialize the map with the parsed geometry
                    initMap(field_key, geometry);
                }
            });
        });
    }

    function loadAllShapesMap(currentShape) {
        const mapId = 'allShapesMap';
        const satellite = L.tileLayer.wms("https://carto10.gouv.nc/arcgis/services/fond_imagerie/MapServer/WMSServer", {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const carte = L.tileLayer.wms('https://carto.gouv.nc/arcgis/services/fond_cartographie/MapServer/WMSServer', {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const map = L.map(mapId, {
            layers: [carte, satellite],
            scrollWheelZoom: false
        });
        map.attributionControl.setPrefix(false); // Remove the "Powered by Leaflet" prefix
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        const baseMaps = {
            "Carte": carte,
            "Satellite": satellite,
        };

        L.control.layers(baseMaps).addTo(map);

        var group = L.featureGroup(); // Create a group to hold all the layers

        shapeTypes.forEach(function(shapeTypeItem) {
            if (shapeTypeItem.type === currentShape.type) {
                shapeTypeItem.shapes.forEach(function(shapeItem) {
                    var geometry = shapeItem.geometry;
                    // No need to parse geometry if it's already GeoJSON
                    var layer = L.geoJSON(geometry, {
                        style: function() {
                            return {
                                color: '#228b22', // Border color
                                weight: 2,       // Border width
                                fillColor: '#228b22cc', // Fill color with opacity
                                fillOpacity: 0.8 // Fill opacity
                            };
                        }
                    }).addTo(map);
                    group.addLayer(layer); // Add each layer to the group

                    // Highlight current shape
                    if (shapeItem.id === currentShape.id) {
                        layer.setStyle({color: 'red', weight: 3, fillOpacity: 0.4});
                        layer.bringToFront(); // Ensure the highlighted shape is on top
                    } else {
                        layer.setStyle({fillOpacity: 0.2}); // Reduce opacity for other shapes
                    }

                    // Show tooltip on hover with additional content
                    var tooltipContent = "<strong>" + shapeItem.name + "</strong><br>";

                    


                    layer.bindTooltip(tooltipContent, {
                        permanent: false,
                        direction: 'right',
                        offset: L.point(10, 0),
                        opacity: 0.9,
                        className: 'custom-tooltip'
                    });


                    layer.on('mousemove', function(e) {
                        var tooltip = e.target.getTooltip();
                        tooltip.setLatLng(e.latlng);
                    });

                    layer.on('click', function() {
                        window.location.href = '../shape/' + shapeItem.id + '.html';
                    });
                });
            }
        });

        map.fitBounds(group.getBounds()); // Adjust the view to fit the bounds of the group

        map.attributionControl.setPrefix(false);
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        maps['allShapesMap'] = map;
    }

    function loadShapeTypeList() {
            var shapeTypeListElement = document.getElementById("shape-type-list");
            shapeTypes.forEach(function (shapeTypeItem) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = "javascript:void(0)";
                a.textContent = shapeTypeItem.type;
                a.className = "shape-type-link";
                if (shapeTypeItem.type === currentShapeType) {
                    a.classList.add("active");
                }
                a.onclick = function () {
                    if (shapeTypeItem.shapes.length > 0) {
                        // Redirect to the first shape of the selected type
                        window.location.href = "../shape/" + shapeTypeItem.shapes[0].id + ".html";
                    }
                    loadShapeList(shapeTypeItem.shapes);
                };
                li.appendChild(a);
                shapeTypeListElement.appendChild(li);
            });
        }

        function loadShapeList(shapes) {
            var shapeListElement = document.getElementById("shape-list");
            shapeListElement.innerHTML = ''; // Clear the previous list
            shapes.forEach(function (shapeItem) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = "../shape/" + shapeItem.id + ".html";
                a.textContent = shapeItem.name;
                a.className = "shape-link";
                if (shapeItem.id === shape.id) {
                    a.classList.add("active");
                }
                li.appendChild(a);
                shapeListElement.appendChild(li);
            });
        }

</script>

</body>
</html>