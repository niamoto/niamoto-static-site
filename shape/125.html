<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Niamoto - Bogota</title>
    <link rel="stylesheet" href="../js/vendor/tailwindcss/2.2.19_dist_tailwind.css">
    <link rel="stylesheet" href="../js/vendor/leaflet/1.9.4_leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    
<script src="../js/shape_list.js"></script>

<style>
    #shape-type-list li, #shape-list li {
        list-style: none;
        text-transform: capitalize;
    }

    .shape-type-link, .shape-link {
        display: block;
        padding: 10px;
        border-radius: 5px;
        text-decoration: none;
    }

    .shape-type-link:hover, .shape-link:hover {
        background-color: #f0f0f0;
    }

    .shape-type-link.active, .shape-link.active {
        background-color: #3498db;
        color: #fff;
    }

    #shapeMap, #allShapesMap {
        position: relative;
        height: 300px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #allShapesMap {
        height: 400px;
    }

    .chart-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    .chart-container > div {
        flex: 1 1 calc(33.333% - 10px);
        margin: 5px;
    }
    .custom-tooltip {
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 5px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    font-size: 12px;
    max-width: 300px;
    word-wrap: break-word;
}
</style>

    <style>
        .gauge {
            height: 349px;
        }

        ul {
            list-style-type: none;
        }

        .loader-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <nav class="nav-bg p-4 fixed w-full top-0 shadow-md z-50 custom-nav">
    <div class="container mx-auto flex flex-wrap items-center justify-between">
        <div class="flex items-center flex-shrink-0 text-white mr-6">
            <a id="home-link" class="inline-flex items-center py-2 px-4 text-white no-underline" href="#" data-link="index.html">
                <span class="site-title">Niamoto</span>
            </a>
        </div>

        <div class="block lg:hidden">
            <button id="nav-toggle"
                class="flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white">
                <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <title>Menu</title>
                    <path d="M0 3h20v2H0zm0 6h20v2H0zm0 6h20v2H0z" />
                </svg>
            </button>
        </div>
        <div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block pt-6 lg:pt-0" id="nav-content">
            <ul class="list-reset lg:flex justify-end flex-1 items-center">
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="index.html">
                        <i class="fas fa-home menu-icon"></i>Accueil
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#introduction">Introduction</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#project">Projet</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#objective">Objectifs</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#context">Contexte</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#flora">Flore</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="methodology.html">
                        <i class="fas fa-flask menu-icon"></i>Méthodologie
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#methodes">Nos méthodes</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#faq">FAQ</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="trees.html">
                        <i class="fas fa-leaf menu-icon"></i>Arbres
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#learnTaxon">Étudier les
                arbres</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#taxon">Les arbres de
                Nouvelle-Calédonie</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="plots.html">
                        <i class="fas fa-map-marked-alt menu-icon"></i>Peuplements
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#learnPlot">Étudier les
                            peuplements forestiers</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#plot">Les
                peuplements forestiers de Nouvelle-Calédonie</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="forests.html">
                        <i class="fas fa-tree menu-icon"></i>Forêt
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#learnForest">Étudier les
                forêts</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#forestPN">La forêt de la
                province Nord</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#forestPS">La forêt de la
                province Sud</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="resources.html">
                        <i class="fas fa-book menu-icon"></i>Ressources
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#equipe">L'équipe</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#article">Articles</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#academic">Académique</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#media-production">Médias</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
  document.getElementById('nav-toggle').onclick = function () {
    document.getElementById('nav-content').classList.toggle('hidden');
  };

  // Function to adjust the navigation links based on page depth
  function adjustNavLinks(depth) {
    document.querySelectorAll('a[data-link]').forEach(link => {
      link.href = depth + link.getAttribute('data-link');
    });
  }

  // Adjust the navigation links based on the depth
  adjustNavLinks("../");
</script>

<style>
    .site-title {
        font-family: 'Arial Black', sans-serif; /* Custom font for a bold effect */
        font-size: 2rem; /* Increased font size */
        text-transform: uppercase; /* Uppercase letters for visibility */
        letter-spacing: 2px; /* Spacing between letters */
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7); /* Text shadow for better visibility */
        transition: color 0.3s; /* Smooth transition for hover effect */
    }

    .site-title:hover {
        color: #ffdd57; /* Change color on hover */
    }

    .text-contour {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    }

    .nav-bg {
        background-color: rgba(34, 139, 34, 0.8); /* Fond vert semi-transparent */
        transition: background-color 0.3s;
    }

    .nav-bg:hover {
        background-color: rgba(34, 139, 34, 1); /* Fond vert opaque au survol */
    }

    .group:hover .group-hover\:block {
        display: block;
    }

    .custom-nav {
        z-index: 500;
    }

    .custom-dropdown {
        z-index: 500;
    }

    .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.2); /* Fond blanc transparent au survol */
        border-radius: 4px;
    }

    .menu-icon {
        margin-right: 8px;
    }
</style>
    <div class="flex">
        
<aside class="w-1/4 p-4 mt-28">
    <h2 class="font-semibold text-lg mb-4">Shape Types</h2>
    <ul id="shape-type-list" class="list-disc pl-5">
        <!-- The list of shape types will be generated by JavaScript -->
    </ul>
</aside>

        <div class="w-full">
            
<div id="allShapesMap" class="mt-28"></div>

<div class="rounded overflow-hidden shadow-lg mb-2 mt-8">
    <div class="px-6 py-4">
        <div class="font-bold text-4xl mb-2">Bogota</div>
    </div>
</div>

<div class="chart-container">
    <!-- Section for general information -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">General Information</h2>
            
                
                    
                        
                        
                            <p>Shape Area (Total Area): 12070.737229983783</p>
                        
                    
                
                    
                
            
                
                    
                        
                        
                            <p>Forest Area (Forest Area): 688.4098315816694</p>
                        
                    
                
                    
                
            
                
                    
                        
                        
                            <p>Number of Families (Number of Families): 59</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Number of Species (Number of Species): 182</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Number of Occurrences (Number of Occurrences): 939</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Average Rainfall (Average Rainfall): 1722.7894287109375</p>
                        
                    
                
                    
                        
                        
                            <p>Average Rainfall (Rainfall Range): {"min": 1390.0, "max": 2440.0}</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Altitude (Median Altitude): 160.0</p>
                        
                    
                
                    
                        
                        
                            <p>Altitude (Maximum Altitude): 608.0</p>
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        </div>
    </div>

    <!-- Section for shape map -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">Shape Map</h2>
            <div id="shapeMap" style="height: 400px; position: relative;">
                <div class="loader-container" id="shapeMapLoader">
                    <div class="loader"></div>
                </div>
                <!-- The Leaflet map will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Section for forest map -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">Forest Map</h2>
            <div id="forestMap" style="height: 400px; position: relative;">
                <div class="loader-container" id="forestMapLoader">
                    <div class="loader"></div>
                </div>
                <!-- The Leaflet map will be loaded here -->
            </div>
        </div>
    </div>
</div>

<div class="flex flex-wrap -mx-2">
    

    

    
    
        
    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
    
        
            
            

            
            
                
            
                
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Elevation Distribution</h2>
        
    
    
        <canvas id="elevationDistributionChart"></canvas>
    
    
                        </div>
                    </div>
                
            

    
        
    
        
            
            

            
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Forest Fragment Distribution</h2>
        
    
    
        <canvas id="forestFragmentationChart"></canvas>
    
    
                        </div>
                    </div>
                
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Fragmentation</h2>
        
    
    
        <div class="gauge" id="forest_fragmentationeffective_mesh_sizeGauge"></div>
    
    
                        </div>
                    </div>
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
</div>

        </div>
    </div>
    <footer class="bg-green-700 text-white p-4 mt-8">
        <div class="container mx-auto">
            <div class="flex justify-center mb-4">
                <div class="bg-white p-2 rounded-lg shadow-md flex justify-center">
                    <figure class="mx-2"><img class="img-fluid" src="../files/ps_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/pn_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/amap_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/herbarium_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/iac_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/ird_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/cirad_100.png"></figure>
                </div>
            </div>
            <div class="text-center">
                <p>Niamoto - Portail de la forêt de Nouvelle-Calédonie</p>
                <a class="inline-block py-2 px-4 text-white no-underline" href="https://github.com/niamoto/niamoto" target="_blank">
                    <span class="fab fa-github fa-lg" aria-hidden="true"></span> Github
                </a>
            </div>
        </div>
    </footer>
    <script src="../js/vendor/chart/4.4.2_chart.js"></script>
    <script src="../js/vendor/d3/7.8.5_d3.js"></script>
    <script src="../js/vendor/jquery/3.6.0_jquery.js"></script>
    <script src="../js/vendor/raphael/2.3.0_raphael.js"></script>
    <script src="../js/vendor/justgage/1.6.1_justgage.js"></script>
    <script src="../js/vendor/leaflet/1.9.4_leaflet.js"></script>
    
<script>
    var shape = {"elevation_elevation_distribution": {"altitudes": [-2.0, 98.0, 198.0, 298.0, 398.0, 498.0, 598.0], "forest": [191.14033138859344, 220.03363729617152, 155.57933950234352, 73.3445457653905, 43.33995886136712, 2.2225619928906215, 0.0], "non_forest": [2660.406705490074, 1572.4626099701147, 1297.9762038481229, 783.4531024939441, 517.8569443435148, 492.2974814252727, 8.890247971562486]}, "elevation_max": 608.0, "elevation_median": 160.0, "forest_area": "688.4098315816694", "forest_coordinates": "{\"type\": \"MultiPolygon\", \"coordinates\": [[[[165.98608492667552, -21.52164025983465], [165.98677200336996, -21.522393308750367], [165.98539767247001, -21.522609798435116], [165.9850775208716, -21.52184730625756], [165.98608492667552, -21.52164025983465]]], [[[165.9875916906214, -21.521263431689594], [165.98910749640575, -21.519945389810026], [165.99071508450146, -21.521042000891114], [165.99412625801105, -21.518410286467766], [165.9927298063281, -21.51981068815376], [165.9939097655105, -21.520340501976204], [165.99194232375774, -21.520723088194394], [165.99401329588775, -21.523231265442213], [165.98946327518658, -21.521225118070276], [165.98738439542453, -21.522496715974217], [165.9875916906214, -21.521263431689594]]], [[[165.99148295434534, -21.508599613210304], [165.99143572061212, -21.50938106783029], [165.99054146883697, -21.50942810443479], [165.99083576220684, -21.508466687243338], [165.99148295434534, -21.508599613210304]]], [[[165.98982823651698, -21.47882116014456], [165.99030787411266, -21.476928104569282], [165.9921719650007, -21.476542086002777], [165.99123185691934, -21.47924541129287], [165.99237161428928, -21.480401753890423], [165.99044596173368, -21.47879348325839], [165.9890939514466, -21.480311845759353], [165.98982823651698, -21.47882116014456]]], [[[165.9882850122282, -21.475853156741184], [165.98973318360237, -21.47564743288208], [165.98992127615583, -21.47670182249045], [165.98782169949192, -21.4776339824194], [165.9882850122282, -21.475853156741184]]], [[[165.98663498245665, -21.475637958420513], [165.9878214060481, -21.47572266741184], [165.98723765217855, -21.476993695854667], [165.9858631314803, -21.476466430201434], [165.98663498245665, -21.475637958420513]]], [[[165.98344623494046, -21.461277598967882], [165.9850090428666, -21.45718313709106], [165.98657132325886, -21.456693544704436], [165.98453903359376, -21.460098792253422], [165.9882845697908, -21.457587972818494], [165.98580888731573, -21.46164476320922], [165.98224077011045, -21.462742247048702], [165.98344623494046, -21.461277598967882]]], [[[165.9791924490165, -21.45856596683692], [165.9794748219378, -21.45942274309257], [165.97885355412433, -21.46037382569013], [165.97871236102554, -21.459865454833047], [165.9791924490165, -21.45856596683692]]], [[[165.98161243591193, -21.4578374116244], [165.98164894676972, -21.455751596412497], [165.98258668852512, -21.45902411911701], [165.98335849728784, -21.45592133849816], [165.9845780764688, -21.455475532880914], [165.9842171495632, -21.457495421933437], [165.98189302330007, -21.460242162582805], [165.98161243591193, -21.4578374116244]]], [[[165.97927127506475, -21.452845990065583], [165.9800361005491, -21.45245879234442], [165.98113032308711, -21.452805823767243], [165.9781749774946, -21.453266899012636], [165.97927127506475, -21.452845990065583]]], [[[165.9859417739829, -21.452149466619357], [165.98645897328296, -21.451716647286187], [165.98657338729896, -21.453944764845883], [165.98585716222772, -21.453438579823423], [165.9859417739829, -21.452149466619357]]], [[[165.98806826023753, -21.451106113498458], [165.98929176010932, -21.45239173176103], [165.98851057561026, -21.45301266702526], [165.98745639959617, -21.449934933877696], [165.98806826023753, -21.451106113498458]]], [[[165.9692350459489, -21.449760909667948], [165.97056655501206, -21.449426234873552], [165.9715097925739, -21.450160598538734], [165.96790486895046, -21.450621681772965], [165.9692350459489, -21.449760909667948]]], [[[165.97120317016547, -21.445519030753477], [165.97194290413174, -21.44509623903053], [165.97196124564897, -21.446877431967284], [165.97048425889093, -21.446564557978192], [165.97120317016547, -21.445519030753477]]], [[[165.9803328566964, -21.43542522511517], [165.98111341058316, -21.435915124584028], [165.97931518195753, -21.435218284502557], [165.98019068123222, -21.435105384600366], [165.9803328566964, -21.43542522511517]]], [[[165.9666240849744, -21.431606491125038], [165.96694405122832, -21.432868237252922], [165.9655693612709, -21.43316015939037], [165.9660488436119, -21.432726616545892], [165.9666240849744, -21.431606491125038]]], [[[165.98867471808092, -21.429151183875195], [165.98988174044104, -21.431620503347556], [165.98942053433643, -21.431912221214628], [165.98797921189578, -21.430552038577954], [165.98867471808092, -21.429151183875195]]], [[[165.9655790979793, -21.426841641102666], [165.96459328299204, -21.428379640160667], [165.96365863368317, -21.428075218441542], [165.96387184279453, -21.427395123695423], [165.9655790979793, -21.426841641102666]]], [[[165.96457212881114, -21.425584050956605], [165.96545136985907, -21.4242190057215], [165.96821188725195, -21.42318365449284], [165.96322300822322, -21.427018920584832], [165.96457212881114, -21.425584050956605]]], [[[165.9616849223372, -21.421908282339412], [165.96296657037584, -21.42190132758303], [165.9607848065994, -21.424363510758962], [165.96046476783874, -21.42291357738302], [165.9616849223372, -21.421908282339412]]], [[[165.96462519886205, -21.415472229549447], [165.9650603919377, -21.416593965791396], [165.96506980337227, -21.417271842425173], [165.9635915158441, -21.414898821428913], [165.96462519886205, -21.415472229549447]]], [[[165.9637841829351, -21.41114749662344], [165.964386286844, -21.412220228832098], [165.96386910377916, -21.41381040690358], [165.9630225383323, -21.412339993785327], [165.9637841829351, -21.41114749662344]]], [[[165.96815244076174, -21.409380198650936], [165.97081404975336, -21.410121782792473], [165.97104911145345, -21.410366228943726], [165.96797215228972, -21.41179649655304], [165.96650622536836, -21.408690126474106], [165.96815244076174, -21.409380198650936]]], [[[165.96432609435897, -21.406583652258103], [165.96516506161163, -21.407239758354002], [165.96527354726157, -21.408018433931712], [165.96327231765764, -21.406184700226753], [165.96432609435897, -21.406583652258103]]], [[[166.0065725970641, -21.531895259503138], [166.0088765366219, -21.530468346390283], [166.00535894087702, -21.526134378424832], [166.00745717712826, -21.526138781163766], [166.0078180046625, -21.52780216207169], [166.00925011948326, -21.52567290923691], [166.00919166044318, -21.527716044931108], [166.0118089744739, -21.5259777769888], [166.01045194951786, -21.529614730719345], [166.00949077736766, -21.52821197977379], [166.00810052824244, -21.52907841959133], [166.0108760282148, -21.531640682375617], [166.00865629425144, -21.531315471653983], [166.00804902909022, -21.533011677831585], [166.0065725970641, -21.531895259503138]]], [[[166.01809630622697, -21.527948584268835], [166.01874681217456, -21.529387919917422], [166.0194684133569, -21.528195528758747], [166.0192431702993, -21.52958859873597], [166.02074906675628, -21.529429014866608], [166.0193650077981, -21.530559095079052], [166.0175473822179, -21.52751742123632], [166.01809630622697, -21.527948584268835]]], [[[166.00198922357987, -21.52642382781288], [166.00218009231756, -21.52758454945049], [166.00353338425697, -21.527977158649307], [166.00164097942914, -21.528438466421193], [166.00036049100913, -21.526809786560445], [166.00198922357987, -21.52642382781288]]], [[[165.9974470587028, -21.525646587045795], [165.99785423465593, -21.526277462679527], [165.99618328853597, -21.526055237370542], [165.99675875264464, -21.525563870496253], [165.9974470587028, -21.525646587045795]]], [[[165.9995204764023, -21.52522686021477], [166.00103730036838, -21.52268593144919], [166.002515534341, -21.523373359597617], [166.00107411006505, -21.524728333613403], [166.0053069780475, -21.522679445843746], [166.00504311951642, -21.524573323397902], [166.0024440367891, -21.526081026980847], [165.9979626491361, -21.526290226085884], [165.9995204764023, -21.52522686021477]]], [[[165.99785140085152, -21.522144943061924], [165.9983674348121, -21.52206166518493], [165.99937506929382, -21.522443963441205], [165.9980868530359, -21.523179041326586], [165.99785140085152, -21.522144943061924]]], [[[166.02095391630087, -21.51931442028433], [166.02140566284461, -21.51956835315065], [166.02051133506689, -21.52066058918282], [166.02032328133023, -21.52019003960187], [166.02095391630087, -21.51931442028433]]], [[[165.99563053968805, -21.51969482184032], [165.99789232562827, -21.51792986612867], [165.99654658440411, -21.518372373453214], [165.9958216375888, -21.51688475662226], [165.9962897538203, -21.512272953855586], [165.99852874358405, -21.51619738768709], [165.99879481514756, -21.512602661018526], [166.00058205677348, -21.51563084022145], [166.00241082770864, -21.514877431105607], [166.00021909722585, -21.51217669788826], [166.0033776942809, -21.51299601771277], [166.00000197812128, -21.509687173838596], [166.0009302182397, -21.508771051415604], [166.0034726831712, -21.51219039523804], [166.00372176691883, -21.51009235834331], [166.00417573825422, -21.512233843151478], [166.0045864026796, -21.508365907270143], [166.00577891714465, -21.509965775681025], [166.00652754359817, -21.507781728536898], [166.01080655733105, -21.509112334019203], [166.0113424757389, -21.510448165518966], [166.00619283532552, -21.5127430927889], [166.0073374936274, -21.513438379397645], [166.00540542789798, -21.513725056149262], [166.00482318442891, -21.516029447439745], [166.00900754749688, -21.51294785687741], [166.0119329635924, -21.51221446378054], [166.01309090035872, -21.512948744255084], [166.00868504073864, -21.513897683333248], [166.00805324974476, -21.51664927282514], [166.0051677147275, -21.518713016648842], [166.0020226126437, -21.517057759153822], [165.99850860555333, -21.517653449637532], [165.99890155246345, -21.519699495023303], [166.00265895820667, -21.52111455096642], [166.0021705942876, -21.52239237693824], [165.99563053968805, -21.51969482184032]], [[165.99937143293258, -21.514558930310162], [165.99866520130522, -21.51494500359979], [165.99950326283636, -21.516526962445123], [166.00002116602977, -21.516300968324362], [165.99937143293258, -21.514558930310162]]], [[[165.9970692089219, -21.502861210117715], [166.00009728096973, -21.501688539369024], [165.9974033978963, -21.500596869312652], [165.9981637987444, -21.499665052817008], [166.0054484879165, -21.502468196479047], [166.0064435809561, -21.497612067876695], [166.00986842612986, -21.49535322407273], [166.00956045365575, -21.493610051913688], [166.01145389357347, -21.494252042092302], [166.0118657106342, -21.496446128324255], [166.00975091504353, -21.496035941997377], [166.00728746319538, -21.49981388888354], [166.0097672933085, -21.500907910537723], [166.00802857042473, -21.50213005880543], [166.00970148024228, -21.50506036011392], [166.0072092239934, -21.502686231697112], [166.00532280409405, -21.503789071013777], [166.0025168991289, -21.5026397991698], [166.00222447789918, -21.506190488005906], [165.99914925281072, -21.50601679187594], [166.0011293496304, -21.508280453235344], [165.998251035467, -21.506595539259905], [165.99825562026572, -21.503700063294755], [165.99497392019336, -21.503073581610625], [165.9970692089219, -21.502861210117715]]], [[[165.99207343040655, -21.493223846651425], [165.99507730381933, -21.49190557956568], [165.9988222804939, -21.493280025113478], [165.99975761135937, -21.49169835508741], [166.003696178989, -21.49088957138941], [166.00102605059374, -21.492654097448348], [166.00523778673715, -21.49304497340019], [166.005162427677, -21.496039260243833], [166.00112071697276, -21.49687828275729], [166.00329957831855, -21.497887014224307], [166.00350523134844, -21.499071366334253], [165.99571628624585, -21.498467085764588], [165.99731178353466, -21.495027319440144], [165.99312810934748, -21.496566445549085], [165.99055738041025, -21.494259440918363], [165.99207343040655, -21.493223846651425]], [[165.99557636482686, -21.4941465559537], [165.99504902495582, -21.494184223087355], [165.99482302215392, -21.494673895824754], [165.9956799494444, -21.494786897225705], [165.99557636482686, -21.4941465559537]], [[166.00152777194307, -21.497800267917444], [166.00074617891988, -21.498581860940615], [166.00281787127048, -21.498082771419796], [166.00239411601694, -21.497743767216974], [166.00152777194307, -21.497800267917444]], [[165.99844848376745, -21.497517764415097], [165.99948432994273, -21.496792672092386], [166.00045425863416, -21.496623169990972], [165.99901349077214, -21.49627474900475], [165.99844848376745, -21.497517764415097]]], [[[166.01928284708885, -21.48674133570965], [166.01989467555535, -21.487048560469294], [166.01911350961993, -21.488011294244007], [166.01895383811058, -21.48779497142594], [166.01928284708885, -21.48674133570965]]], [[[166.008557337451, -21.48689519875185], [166.00945036223808, -21.48727149207007], [166.00797449230194, -21.48732889512759], [166.00747404537168, -21.486038464528246], [166.008557337451, -21.48689519875185]]], [[[166.0093047531698, -21.484391129983166], [166.00976569159315, -21.485765246253205], [166.00884360166052, -21.48599102819124], [166.00799652679845, -21.485172165609065], [166.0093047531698, -21.484391129983166]]], [[[166.0016359992186, -21.484621679450942], [166.0049318844386, -21.483341024523856], [166.00738008280072, -21.48570435731078], [166.00153471028, -21.486014791821315], [166.0016359992186, -21.484621679450942]]], [[[166.0173020192042, -21.48496586058401], [166.0176301923547, -21.48563168791864], [166.01659482239265, -21.483984484604008], [166.01695223928735, -21.48395616750373], [166.0173020192042, -21.48496586058401]]], [[[166.00289037347437, -21.480202568888124], [166.0048546599546, -21.479413998306857], [166.00855706660334, -21.481589139855494], [166.0065566122525, -21.481333866728544], [166.00657989592645, -21.482766123121966], [166.00109956452891, -21.481033724500456], [166.00289037347437, -21.480202568888124]]], [[[166.00235697834393, -21.47570592965754], [166.00315012574202, -21.474971285264807], [166.00216334152753, -21.477175675306423], [166.00218186284428, -21.475981887718568], [166.00235697834393, -21.47570592965754]]], [[[166.00008150071798, -21.467479852769497], [166.00247339098, -21.468311705865535], [166.0028806942863, -21.469585991704857], [166.00121025322287, -21.470319833337555], [165.99899707308026, -21.46767234897329], [166.00008150071798, -21.467479852769497]]], [[[166.0151882978898, -21.469123083105817], [166.01555821778345, -21.466276826746224], [166.01705595845192, -21.46493825684384], [166.0187880663689, -21.467498873566466], [166.01689865507038, -21.467419045508013], [166.01716890184912, -21.470285323203953], [166.0164883566984, -21.468652050346638], [166.0151882978898, -21.469123083105817]]], [[[165.99604105608037, -21.464806412393308], [165.99586224609027, -21.465474490264562], [165.9951471305949, -21.465446305924125], [165.99511888724757, -21.464533479261902], [165.99604105608037, -21.464806412393308]]], [[[166.00272259569712, -21.46465542619769], [166.00598645907826, -21.463608349147407], [166.0085085560928, -21.465259056623783], [166.0045418363954, -21.46428932694567], [166.00215075496146, -21.465976253108238], [166.00272259569712, -21.46465542619769]]], [[[165.9975862497588, -21.46398356875278], [165.99736834513828, -21.465371060511828], [165.99649321809756, -21.465813339545498], [165.9964274388045, -21.46377092800826], [165.9975862497588, -21.46398356875278]]], [[[165.99155350335838, -21.454377432211622], [165.99288774349745, -21.45423669795685], [165.99327375658052, -21.457804035150513], [165.99101807762972, -21.45653745051599], [165.99155350335838, -21.454377432211622]]], [[[165.99882949774954, -21.4549544345117], [165.99922319464656, -21.455782711538657], [165.99786784983243, -21.455130853359638], [165.99820661898042, -21.454745171424364], [165.99882949774954, -21.4549544345117]]], [[[166.02405822893476, -21.535356344156586], [166.02466149190792, -21.535806436160936], [166.0231954948562, -21.535833861897135], [166.02320088743988, -21.535365810567363], [166.02405822893476, -21.535356344156586]]], [[[166.02288599782045, -21.534267021929598], [166.02340787571123, -21.533930720409717], [166.02398892016922, -21.534100565699102], [166.02283134155368, -21.534667525161268], [166.02198324505292, -21.533773106140377], [166.02288599782045, -21.534267021929598]]], [[[166.03573204375368, -21.530254246320947], [166.03758798934768, -21.53042376355278], [166.0376285898566, -21.532830390757102], [166.03565692853607, -21.532129046142433], [166.03573204375368, -21.530254246320947]]], [[[166.0393334607427, -21.529699034722736], [166.04065956781085, -21.529936023180728], [166.0407320614997, -21.531597969386215], [166.03844599256598, -21.52966991601725], [166.0393334607427, -21.529699034722736]]], [[[166.02929699077882, -21.52959478887545], [166.03185620889442, -21.52921595092692], [166.03210249035547, -21.527682222210355], [166.03562819441316, -21.528869061558368], [166.0316954637796, -21.529587417606812], [166.03050293866664, -21.531478790206897], [166.02929699077882, -21.52959478887545]]], [[[166.02695326416494, -21.522552424803134], [166.03105993221388, -21.522810315594988], [166.0315056975214, -21.518651248288688], [166.02824343596188, -21.5158663035065], [166.02890257055745, -21.51383247252321], [166.0299694093797, -21.516234831739038], [166.03145411336794, -21.51406786274567], [166.03159012956505, -21.51710331596929], [166.035070218117, -21.514962552204754], [166.03380140025138, -21.51675297282313], [166.03464641613638, -21.51844638079049], [166.03251287815465, -21.519258047325007], [166.03285113940444, -21.521594895388972], [166.03411907032165, -21.520179284446506], [166.03291426326558, -21.522680115547214], [166.03471397439566, -21.52273954190199], [166.03607142021616, -21.519206931158184], [166.03744650474238, -21.520424379854518], [166.03423205506962, -21.52453911290349], [166.03275680677606, -21.52477672895292], [166.03343149706987, -21.526347130180163], [166.03080498842917, -21.525009628027696], [166.02928850270897, -21.526205696661147], [166.02996590262092, -21.52414399840674], [166.02695326416494, -21.522552424803134]], [[166.03277265930305, -21.524445056580998], [166.03358250267644, -21.524369722313708], [166.03367667051057, -21.52384238244264], [166.03253723971775, -21.52446389014782], [166.03277265930305, -21.524445056580998]]], [[[166.02618105033446, -21.516713974838012], [166.02740480268244, -21.517599057808425], [166.0260774347692, -21.520207303455965], [166.02523003853315, -21.51706236608006], [166.02618105033446, -21.516713974838012]]], [[[166.02786575233415, -21.504815006147208], [166.02946624027135, -21.50540346762753], [166.02948496327159, -21.506156971817845], [166.02676256510793, -21.504998133777196], [166.02786575233415, -21.504815006147208]]], [[[166.03976887872324, -21.504624581014852], [166.04063152464067, -21.505525623816116], [166.03853076587936, -21.504357567608622], [166.0390371381085, -21.504140392670333], [166.03976887872324, -21.504624581014852]]], [[[166.02445468019127, -21.503937587875445], [166.0246705011675, -21.50471546988684], [166.0235308019863, -21.50473423139926], [166.02340929692494, -21.504056602058412], [166.02445468019127, -21.503937587875445]]], [[[166.02169323229018, -21.501831842199383], [166.0247270299439, -21.50185148187795], [166.0247740617965, -21.50294414644951], [166.02304057329692, -21.503999262262035], [166.02053457415863, -21.501719299675624], [166.02169323229018, -21.501831842199383]]], [[[166.03162178231526, -21.500254096062932], [166.03217992721963, -21.499232100061278], [166.03287703588458, -21.502623678766344], [166.0321438500888, -21.502653517029003], [166.03162178231526, -21.500254096062932]]], [[[166.0351238077803, -21.4981345364128], [166.0359203880685, -21.499457940188808], [166.03494063547654, -21.500767462432012], [166.03424377418256, -21.49809186292601], [166.0351238077803, -21.4981345364128]]], [[[166.03424875160567, -21.496815114514725], [166.0350821304067, -21.495736379675325], [166.03626904674627, -21.49486017569308], [166.03548703396032, -21.4978277736182], [166.03310361223183, -21.497564066341376], [166.03424875160567, -21.496815114514725]]], [[[166.02180740599627, -21.49727351902683], [166.0231091179561, -21.495313350738336], [166.02144436121276, -21.493784195826706], [166.0295667915132, -21.49431901466492], [166.0288647726622, -21.491806688543388], [166.0309549285751, -21.493633460517238], [166.02888447549077, -21.49661802418279], [166.0275104842682, -21.494861595868876], [166.02421280760186, -21.497004297337142], [166.02393580430706, -21.495861237526942], [166.02141603598056, -21.498689956345597], [166.02180740599627, -21.49727351902683]]], [[[166.0311131729243, -21.49057390654145], [166.0329513071102, -21.49054464550082], [166.03065615116904, -21.491674021883085], [166.03265921313331, -21.493691811308555], [166.02974068921606, -21.491806326446497], [166.0311131729243, -21.49057390654145]]], [[[166.0235785404282, -21.48769975567396], [166.0248719156891, -21.48787988568621], [166.02512032879855, -21.488125252288064], [166.02272257744102, -21.488361483379844], [166.0235785404282, -21.48769975567396]]], [[[166.0332152433264, -21.487735240602678], [166.03408143055916, -21.487540789817412], [166.03484423665768, -21.488990678034206], [166.03274452580655, -21.488378608408624], [166.0332152433264, -21.487735240602678]]], [[[166.02126345304814, -21.485979305906717], [166.02344277806355, -21.485006914357953], [166.0226106813335, -21.4841881351035], [166.02291619495745, -21.48347846211517], [166.02569356891615, -21.48504097705281], [166.02448803759347, -21.482615301974718], [166.0274892849346, -21.484715044100643], [166.02732961270019, -21.481391762243888], [166.03045592143147, -21.485233580085186], [166.0262185451258, -21.487436937801522], [166.02500342846417, -21.486085725273504], [166.02449386729927, -21.487218661119346], [166.02472644536272, -21.485724188341184], [166.0214563731583, -21.48612014300661], [166.02105818017714, -21.48879286466888], [166.02126345304814, -21.485979305906717]]], [[[166.0341734252006, -21.48141595633486], [166.03501856854632, -21.48365221431134], [166.03497260473105, -21.485038453753962], [166.03260025410725, -21.481291675587038], [166.0341734252006, -21.48141595633486]]], [[[166.02472935340415, -21.47900306418788], [166.02580291767254, -21.479321106556505], [166.02430550315148, -21.481338547100645], [166.02370341036817, -21.479519599104716], [166.02472935340415, -21.47900306418788]]], [[[166.03611058841489, -21.478104164534173], [166.03668089600254, -21.478459069551825], [166.0348195340915, -21.478126372760148], [166.03565408703912, -21.477910859366602], [166.03611058841489, -21.478104164534173]]], [[[166.02829754131878, -21.47567236380293], [166.02872477690852, -21.477532230273795], [166.02844217037276, -21.477761724849426], [166.0276006949792, -21.476490705403002], [166.02829754131878, -21.47567236380293]]], [[[166.0304893292288, -21.47378917245845], [166.03203492190457, -21.47337393708376], [166.03146261210762, -21.475330419348655], [166.03014667176478, -21.475387373173675], [166.0304893292288, -21.47378917245845]]], [[[166.05243232142033, -21.537893664841956], [166.05233587575728, -21.53791852653444], [166.05234331336223, -21.537895469959075], [166.05243232142033, -21.537893664841956]]], [[[166.0404370011953, -21.520258836455522], [166.03959040171014, -21.515687638412853], [166.04485889133588, -21.518578210547112], [166.0451140945718, -21.522668668186583], [166.04585042191349, -21.518464134676123], [166.04669963423063, -21.52278142008955], [166.04502032868487, -21.524528454553433], [166.04817830177987, -21.52512299467394], [166.0429639005452, -21.52712056386688], [166.0441346198627, -21.524014336405134], [166.03928926243154, -21.51974612425924], [166.0404370011953, -21.520258836455522]]], [[[166.0509405228971, -21.51708591103204], [166.05181545843925, -21.51629076431031], [166.05478332783676, -21.518486040617347], [166.05225627852573, -21.519369996905414], [166.0509405228971, -21.51708591103204]]], [[[166.04922061798501, -21.506603368623484], [166.04981909554905, -21.50702215260633], [166.04828261326944, -21.506128920540675], [166.04872676526278, -21.506082777520007], [166.04922061798501, -21.506603368623484]]], [[[166.04764871729662, -21.506193489232924], [166.04800901973576, -21.506844776301495], [166.04648304508854, -21.50610068436865], [166.04673460000953, -21.50594984281759], [166.04764871729662, -21.506193489232924]]], [[[166.0554149199581, -21.502963226435785], [166.05732828450044, -21.505311522498015], [166.05758176316226, -21.507410127551136], [166.0546142361358, -21.504310339636], [166.0554149199581, -21.502963226435785]]], [[[166.05117605040553, -21.5038222439726], [166.05304974162166, -21.504489551956343], [166.0520323043499, -21.50582707840395], [166.04967698935994, -21.504508201775813], [166.05117605040553, -21.5038222439726]]], [[[166.0397929469523, -21.502689063407665], [166.04075391854636, -21.50334924940331], [166.03873780220047, -21.50329992741724], [166.03864376731616, -21.502463770545067], [166.0397929469523, -21.502689063407665]]], [[[166.05074387317134, -21.49781277573157], [166.05388828410054, -21.498883338615354], [166.05159645987686, -21.499936111890747], [166.05226780057635, -21.50199236974851], [166.05074387317134, -21.49781277573157]]], [[[166.04169984012827, -21.49689178657655], [166.0456260027151, -21.499756174690265], [166.04418580369136, -21.50150559846289], [166.04276142424925, -21.500590120729324], [166.04284860714137, -21.50222123034379], [166.040438115059, -21.49814399590057], [166.04169984012827, -21.49689178657655]]], [[[166.06347376849027, -21.498765912981824], [166.06393279560504, -21.496245045018586], [166.06540220926544, -21.495331262077617], [166.0635460201233, -21.499994852882594], [166.06347376849027, -21.498765912981824]]], [[[166.06107813116895, -21.494240949020803], [166.06177173832336, -21.494381619853794], [166.06144369600727, -21.495346868649904], [166.06077832153395, -21.49517817655784], [166.06107813116895, -21.494240949020803]]], [[[166.05809101218367, -21.49342802597194], [166.0586842518341, -21.493484556031323], [166.05891025925422, -21.494445301081868], [166.05803453481215, -21.494492428416546], [166.05809101218367, -21.49342802597194]]], [[[166.04532514258435, -21.491957251152634], [166.04725549772334, -21.492541150248027], [166.0472084130769, -21.494461825560638], [166.0443366474609, -21.49260676560916], [166.04532514258435, -21.491957251152634]]], [[[166.0464177757054, -21.488707830590986], [166.04768871612995, -21.488689779941627], [166.047413735044, -21.49025727888609], [166.0497226497492, -21.49233365422338], [166.04592709655986, -21.489346277299795], [166.0464177757054, -21.488707830590986]]], [[[166.050956064851, -21.48766754595276], [166.05165087948976, -21.488840049092634], [166.05118055591402, -21.49012314245716], [166.0488738291101, -21.48660173765831], [166.050956064851, -21.48766754595276]]], [[[166.04409752916385, -21.475504183750953], [166.04605666298337, -21.474941247518437], [166.04614093098158, -21.476606074438834], [166.04331581971644, -21.47676611749639], [166.04409752916385, -21.475504183750953]]], [[[166.04958233479633, -21.47319953480825], [166.05026619747682, -21.472339931722807], [166.05159889971725, -21.47300658115026], [166.04933973724675, -21.47472921216788], [166.04958233479633, -21.47319953480825]]], [[[166.05168760252283, -21.469970442741737], [166.05225329164884, -21.470842334049763], [166.05216595940888, -21.47114171424152], [166.05090692869155, -21.469627352767816], [166.05168760252283, -21.469970442741737]]], [[[166.05608034860893, -21.46904299376123], [166.055280198519, -21.470116032310194], [166.0548662398304, -21.47008780701751], [166.0546497628356, -21.469090148708656], [166.05608034860893, -21.46904299376123]]], [[[166.05051052446714, -21.467426330441434], [166.05123168511778, -21.46786601289373], [166.0507140284739, -21.468440103668943], [166.05005460132293, -21.46757414658852], [166.05051052446714, -21.467426330441434]]]]}", "forest_cover_percentage": null, "forest_fragmentation_effective_mesh_size": 0.382041562681071, "forest_fragmentation_fragment_size_distribution": {"10": 34.20831051079241, "100": 99.99999999999999, "1000": 99.99999999999999, "1100": 99.99999999999999, "1200": 99.99999999999999, "12000": 99.99999999999999, "125": 99.99999999999999, "1300": 99.99999999999999, "1400": 99.99999999999999, "150": 99.99999999999999, "1500": 99.99999999999999, "1600": 99.99999999999999, "1700": 99.99999999999999, "17000": 99.99999999999999, "175": 99.99999999999999, "1800": 99.99999999999999, "1900": 99.99999999999999, "20": 46.32986215818023, "200": 99.99999999999999, "2000": 99.99999999999999, "225": 99.99999999999999, "250": 99.99999999999999, "27000": 99.99999999999999, "275": 99.99999999999999, "30": 52.89835324349641, "300": 99.99999999999999, "325": 99.99999999999999, "350": 99.99999999999999, "375": 99.99999999999999, "40": 52.89835324349641, "400": 99.99999999999999, "425": 99.99999999999999, "450": 99.99999999999999, "475": 99.99999999999999, "50": 59.039433190604626, "500": 99.99999999999999, "500000": 99.99999999999999, "60": 66.42683344873245, "600": 99.99999999999999, "70": 75.20613070994816, "700": 99.99999999999999, "7000": 99.99999999999999, "80": 85.58860385626046, "800": 99.99999999999999, "90": 85.58860385626046, "900": 99.99999999999999}, "forest_humidity_category_distribution": null, "frequencies": {}, "id": 125, "land_use_category_distribution": null, "name": "Bogota", "num_families_unique_taxonomic_count": 59, "num_occurrences_count": 939, "num_species_unique_taxonomic_count": 182, "rainfall_mean": "1722.7894287109375", "rainfall_range": "{\"min\": 1390.0, \"max\": 2440.0}", "shape_area": "12070.737229983783", "shape_coordinates": "{\"type\": \"FeatureCollection\", \"features\": [{\"id\": \"0\", \"type\": \"Feature\", \"properties\": {}, \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[166.0766505251047, -21.522637388134083], [166.0597734721463, -21.537120965523506], [166.04833765773884, -21.53846925485123], [166.04070404997654, -21.53448395759784], [166.0302358723557, -21.534555706137255], [166.02521678753035, -21.536344634587877], [166.01466266245916, -21.532177743668193], [166.0081293355902, -21.533041601966296], [166.00300467698838, -21.53019391455171], [166.00010707431562, -21.526417548077646], [165.98555715306645, -21.52537867424848], [165.98061789403866, -21.5222450175831], [165.9783998249834, -21.511420000274374], [165.98128017621278, -21.498755853905244], [165.9796977952272, -21.494883607252888], [165.979800853864, -21.48812468080849], [165.9745063783444, -21.485573551206773], [165.96772362218002, -21.479424810622547], [165.96563941123506, -21.47237029533589], [165.96216756196105, -21.46986389848501], [165.96015421967843, -21.464261997774233], [165.9552518115141, -21.461522216776167], [165.9529253099776, -21.456873285187804], [165.95340038012424, -21.452144688053682], [165.95739334522557, -21.446691046836467], [165.95817650644273, -21.437732667991863], [165.9572267976384, -21.433828715255785], [165.94768982019428, -21.426016312834225], [165.94594841027117, -21.40940871062386], [165.94741393418545, -21.403927984637303], [165.9553135857807, -21.398025339754145], [165.9610221963995, -21.39645930986804], [165.97131265233904, -21.401702498249918], [165.97941363516705, -21.403049977118357], [165.98442767548264, -21.40797765328891], [165.98969444221723, -21.41712841883028], [165.99913301963394, -21.42081341074793], [166.0019272211589, -21.42603494455085], [166.0024496103615, -21.43154562008349], [166.00692268284467, -21.430961658615168], [166.01328948038653, -21.43341637022984], [166.01566933136775, -21.43665832774066], [166.0165422971098, -21.441941604141277], [166.02402887424608, -21.44177099100739], [166.03046131785513, -21.44787818101124], [166.04011948748987, -21.450539647432525], [166.04444815729698, -21.455198898325765], [166.04975574178826, -21.45803445016566], [166.06012509841113, -21.45815621414653], [166.065061303898, -21.46128357985515], [166.06709306790768, -21.4665290697899], [166.0667897443199, -21.47098045735763], [166.0615691674714, -21.477916634068965], [166.0676296747228, -21.483994365382], [166.06951399124944, -21.493531408307703], [166.0714651672117, -21.49644107425069], [166.07227272692285, -21.50525083427484], [166.07841628161205, -21.517476877710802], [166.0766505251047, -21.522637388134083]]]}, \"bbox\": [165.94594841027117, -21.53846925485123, 166.07841628161205, -21.39645930986804]}], \"bbox\": [165.94594841027117, -21.53846925485123, 166.07841628161205, -21.39645930986804]}", "shape_id": 125, "type": "mines"};
    var mapping = {"fields": {"elevation": {"data_source": {"name": "elevation", "type": "layer"}, "description": "Altitude metrics within the shape", "field_type": "JSON", "label": "Altitude", "transformations": [{"chart_options": {"title": "Median Altitude"}, "chart_type": "text", "name": "median"}, {"chart_options": {"title": "Maximum Altitude"}, "chart_type": "text", "name": "max"}, {"chart_options": {"title": "Elevation Distribution", "x_label": "Elevation (m)", "y_label": "Area (ha)"}, "chart_type": "stacked_bar", "data_structure": {"x_field": "altitudes", "y_fields": [{"color": "#4BC0C0", "label": "For\u00eat", "name": "forest"}, {"color": "#FF6384", "label": "Hors-for\u00eat", "name": "non_forest"}]}, "name": "elevation_distribution"}]}, "forest": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Area covered by forest within the shape", "field_type": "TEXT", "label": "Forest Area", "transformations": [{"chart_options": {"title": "Forest Area"}, "chart_type": "text", "name": "area"}, {"chart_options": {"coordinates_field": "forest_coordinates", "title": "Forest Location"}, "chart_type": "map", "name": "coordinates"}]}, "forest_cover": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Area covered by forest within the shape", "field_type": "JSON", "label": "Forest Area", "transformations": [{"chart_options": {"categories": ["UM", "Non-UM", "Commune"], "title": "Forest Cover"}, "chart_type": "donut", "layer_params": {"forest_cover": [{"name": "area"}, {"attribute": "cover_type"}], "soil_types": [{"attribute": "soil_category"}]}, "name": "percentage"}]}, "forest_fragmentation": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Analysis of forest fragmentation", "field_type": "JSON", "label": "Forest Fragmentation", "transformations": [{"chart_options": {"bins": [10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 125, 150, 175, 200, 225, 250, 275, 300, 325, 350, 375, 400, 425, 450, 475, 500, 600, 700, 800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 7000, 12000, 17000, 27000, 500000], "title": "Forest Fragment Distribution", "x_label": "Area (ha)", "y_label": "Cumulative Area (%)"}, "chart_type": "line", "data_structure": {"color": "#4BC0C0", "x_field": "keys", "y_field": "values"}, "name": "fragment_size_distribution"}, {"chart_options": {"label": "Effective Mesh Size (km\u00b2)", "max": 1000, "min": 0, "title": "Fragmentation"}, "chart_type": "gauge", "name": "effective_mesh_size"}]}, "forest_humidity": {"data_source": [{"name": "forest_cover", "type": "layer"}, {"name": "holdridge", "type": "shape"}], "description": "Distribution of forests by humidity level", "field_type": "JSON", "label": "Forest and Living Environments", "transformations": [{"chart_options": {"categories": ["Dry", "Humid", "Very Humid"], "title": "Forest and Living Environments", "x_label": "Category", "y_label": "Frequency (%)"}, "chart_type": "stacked_bar", "layer_params": {"forest_cover": [{"name": "area"}], "humidity": [{"name": "value"}]}, "name": "category_distribution"}]}, "land_use": {"data_source": [{"name": "ultramafic", "type": "shape"}, {"name": "holdridge", "type": "shape"}, {"name": "forest_cover", "type": "layer"}], "description": "Land use distribution", "field_type": "JSON", "label": "Land Use", "transformations": [{"chart_options": {"title": "Land Use", "x_label": "Category", "y_label": "Area (ha)"}, "chart_type": "bar", "name": "category_distribution"}]}, "num_families": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of families in the zone", "field_type": "INTEGER", "label": "Number of Families", "transformations": [{"chart_options": {"title": "Number of Families"}, "chart_type": "text", "name": "unique_taxonomic_count", "target_ranks": ["family"]}]}, "num_occurrences": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of occurrences in the zone", "field_type": "INTEGER", "label": "Number of Occurrences", "source_field": "id_occurrence", "transformations": [{"chart_options": {"title": "Number of Occurrences"}, "chart_type": "text", "name": "count"}]}, "num_species": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of species in the zone", "field_type": "INTEGER", "label": "Number of Species", "transformations": [{"chart_options": {"title": "Number of Species"}, "chart_type": "text", "name": "unique_taxonomic_count", "target_ranks": ["species", "infra"]}]}, "rainfall": {"data_source": {"name": "rainfall", "type": "layer"}, "description": "Average annual rainfall within the shape", "field_type": "TEXT", "label": "Average Rainfall", "transformations": [{"chart_options": {"title": "Average Rainfall"}, "chart_type": "text", "name": "mean"}, {"chart_options": {"title": "Rainfall Range"}, "chart_type": "text", "name": "range"}]}, "shape": {"data_source": {"name": "self", "type": "shape"}, "description": "Total area of the reference zone", "field_type": "TEXT", "label": "Shape Area", "transformations": [{"chart_options": {"title": "Total Area"}, "chart_type": "text", "name": "area"}, {"chart_options": {"coordinates_field": "shape_coordinates", "title": "Location"}, "chart_type": "map", "name": "coordinates"}]}}, "group_by": "shape", "source_location_field": "geo_pt", "source_table_name": "occurrences"};
    var currentShapeType = "mines";

    document.addEventListener('DOMContentLoaded', function () {
        loadShapeCharts(shape, mapping);
        loadShapeTypeList();
        initShapeMaps(mapping, shape);
        loadAllShapesMap(shape);
    });

    function loadShapeCharts(shape, mapping) {
        Object.entries(mapping.fields).forEach(function([field_key, field]) {
            if (field.field_type !== 'TEXT' && shape[field_key] !== null) {
                // Handle bins chart if present
                if (field.bins && field.bins.values && field.bins.values.length > 0) {
                    var binChartId = field_key + 'BinChart';
                    var binCtx = document.getElementById(binChartId);
                    if (binCtx) {
                        createBinChart(binCtx, field, shape);
                    }
                }

                // Handle transformations
                field.transformations.forEach(function(transformation) {
                    var transformationName = transformation.name ? transformation.name : '';
                    var valueKey = field_key + '_' + transformationName;

                    if (shape[valueKey] !== null) {
                        switch(transformation.chart_type) {
                            case 'pie':
                                var pieChartId = field_key + 'PieChart';
                                var pieCtx = document.getElementById(pieChartId);
                                if (pieCtx) {
                                    createPieChart(pieCtx, transformation, shape[valueKey]);
                                }
                                break;
                            case 'gauge':
                                var gaugeId = field_key + transformationName + 'Gauge';
                                var gaugeElement = document.getElementById(gaugeId);
                                if (gaugeElement) {
                                    createGauge({
                                        id: gaugeId,
                                        value: parseFloat(shape[valueKey]),
                                        min: 0,
                                        max: transformation.chart_options.max,
                                        title: transformation.chart_options.title,
                                        label: transformation.chart_options.label
                                    });
                                }
                                break;
                            case 'bar':
                                var barChartId = field_key + transformationName + 'BarChart';
                                var barCtx = document.getElementById(barChartId);
                                if (barCtx) {
                                    createBarChart(barCtx, field, transformation, shape[valueKey]);
                                }
                                break;
                            case 'stacked_bar':
                                if (field_key === 'elevation' && transformationName === 'elevation_distribution') {
                                    var stackedBarChartId = 'elevationDistributionChart';
                                    var stackedBarCtx = document.getElementById(stackedBarChartId);
                                    if (stackedBarCtx) {
                                        createElevationDistributionChart(stackedBarCtx, shape.elevation_elevation_distribution, transformation);
                                    }
                                }
                                break;
                            case 'line':
                                if (field_key === 'forest_fragmentation' && transformationName === 'fragment_size_distribution') {
                                    var lineChartId = 'forestFragmentationChart';
                                    var lineCtx = document.getElementById(lineChartId);
                                    if (lineCtx) {
                                        createForestFragmentationChart(lineCtx, shape.forest_fragmentation_fragment_size_distribution, transformation);
                                    }
                                }
                                break;
                        }
                    }
                });
            }
        });
    }

    function createBinChart(ctx, field, shape) {
        var binData = {
            labels: field.bins.values,
            datasets: [{
                label: field.label,
                data: field.bins.values.map(value => shape.frequencies[field.field_key][value] || 0),
                backgroundColor: field.bins.chart_options.color
            }]
        };

        new Chart(ctx, {
            type: field.bins.chart_type,
            data: binData,
            options: field.bins.chart_options
        });
    }

    function createPieChart(ctx, transformation, data) {
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['True', 'False'],
                datasets: [{
                    data: [data.true || 0, data.false || 0],
                    backgroundColor: ['#FF6384', '#36A2EB']
                }]
            },
            options: {
                title: {
                    display: true,
                    text: transformation.chart_options.title
                }
            }
        });
    }

    function createBarChart(ctx, field, transformation, data) {
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    label: field.label,
                    data: Object.values(data),
                    backgroundColor: getColor(0).background,
                    borderColor: getColor(0).border,
                    borderWidth: 1
                }]
            },
            options: transformation.chart_options
        });
    }

    function createElevationDistributionChart(ctx, elevationData, chartConfig) {
        const altitudes = elevationData.altitudes.reverse();
        const forestData = elevationData.forest.reverse();
        const nonForestData = elevationData.non_forest.reverse();

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: altitudes,
                datasets: [
                    {
                        label: 'Forest',
                        data: forestData,
                        backgroundColor: '#4CAF50',
                        stack: 'Stack 0',
                    },
                    {
                        label: 'Non-Forest',
                        data: nonForestData,
                        backgroundColor: '#FFF59D',
                        stack: 'Stack 0',
                    }
                ]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                scales: {
                    x: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Area (ha)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString(); // Format les grands nombres
                            }
                        }
                    },
                    y: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Elevation (m)'
                        },
                        reverse: false
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                },
                layout: {
                    padding: {
                        left: 10,
                        right: 10,
                        top: 0,
                        bottom: 10
                    }
                }
            }
        });
    }

    function createForestFragmentationChart(ctx, fragmentationData, chartConfig) {
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: Object.keys(fragmentationData),
                datasets: [{
                    label: 'Cumulative Area (%)',
                    data: Object.values(fragmentationData),
                    borderColor: '#4BC0C0',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: chartConfig.chart_options.x_label
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: chartConfig.chart_options.y_label
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: chartConfig.chart_options.title
                    }
                }
            }
        });
    }

    function createGauge(options) {
        new JustGage({
            id: options.id,
            value: options.value || 0,
            min: options.min || 0,
            max: options.max,
            title: options.title,
            label: options.label,
            pointer: true,
            pointerOptions: {
                toplength: 10,
                bottomlength: 10,
                bottomwidth: 2,
                color: '#8e8e93',
                stroke: '#ffffff',
                stroke_width: 3,
                stroke_linecap: 'round'
            },
            gaugeWidthScale: 0.6,
            counter: true,
            donut: true,
            relativeGaugeSize: true,
            donutStartAngle: 270,
            hideInnerShadow: true,
            customSectors: [{
                color: "#ff0000",
                lo: 0,
                hi: options.max * 0.33
            }, {
                color: "#ffff00",
                lo: options.max * 0.33,
                hi: options.max * 0.66
            }, {
                color: "#00ff00",
                lo: options.max * 0.66,
                hi: options.max
            }],
            humanFriendly: true,
            formatNumber: true,
            textRenderer: function (val) {
                return parseFloat(val).toFixed(2);
            }
        });
    }

    // Function to get a color based on the index
    function getColor(index) {
        var colors = [
            {background: 'rgba(54, 162, 235, 0.6)', border: 'rgba(54, 162, 235, 1)'},
            {background: 'rgba(75, 192, 192, 0.6)', border: 'rgba(75, 192, 192, 1)'},
            {background: 'rgba(255, 99, 132, 0.6)', border: 'rgba(255, 99, 132, 1)'}
        ];
        return colors[index % colors.length];
    }

// Rest of the code (loadShapeTypeList, initShapeMaps, loadAllShapesMap) remains the same...

    let maps = {};  // Object to keep track of initialized maps

    function initMap(field_key, geometry) {
        const mapId = field_key + 'Map';
        const mapLoaderId = field_key + 'MapLoader';

        // Check if the map already exists
        if (maps[mapId]) {
            return; // Map is already initialized, so do nothing
        }

        const satellite = L.tileLayer.wms("https://carto10.gouv.nc/arcgis/services/fond_imagerie/MapServer/WMSServer", {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const carte = L.tileLayer.wms('https://carto.gouv.nc/arcgis/services/fond_cartographie/MapServer/WMSServer', {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const map = L.map(mapId, {
            layers: [carte, satellite],
            scrollWheelZoom: false
        });
        map.attributionControl.setPrefix(false); // Remove the "Powered by Leaflet" prefix
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        const baseMaps = {
            "Carte": carte,
            "Satellite": satellite,
        };

        L.control.layers(baseMaps).addTo(map);

        map.on('load', function () {
            document.getElementById(mapLoaderId).style.display = 'none';
        });

        if (geometry) {
            const geoJsonLayer = L.geoJSON(geometry, {
                style: function() {
                    return {
                        color: '#228b22', // Border color
                        weight: 2,       // Border width
                        fillColor: '#228b22cc', // Fill color with opacity
                        fillOpacity: 0.8 // Fill opacity
                    };
                }
            }).addTo(map);
            map.fitBounds(geoJsonLayer.getBounds());
        } else {
            console.warn("No geographic coordinates found.");
            // Set default view if no geometry is found
            map.setView([-21.291237, 165.516418], 10);
        }

        // Store the map instance in the maps object
        maps[mapId] = map;
    }

    function initShapeMaps(mapping, shape) {
        Object.entries(mapping.fields).forEach(function([field_key, field]) {
            field.transformations.forEach(function(transformation) {
                if (transformation.chart_type === 'map') {
                    var coordinatesField = transformation.chart_options.coordinates_field;
                    var geometry = shape[coordinatesField];

                    // Check if geometry is a string, if so, parse it as JSON
                    if (typeof geometry === 'string') {
                        try {
                            geometry = JSON.parse(geometry);
                        } catch (e) {
                            console.error("Invalid JSON for field", coordinatesField, ":", geometry);
                            return; // Skip this field if JSON is invalid
                        }
                    }

                    // Initialize the map with the parsed geometry
                    initMap(field_key, geometry);
                }
            });
        });
    }

    function loadAllShapesMap(currentShape) {
        const mapId = 'allShapesMap';
        const satellite = L.tileLayer.wms("https://carto10.gouv.nc/arcgis/services/fond_imagerie/MapServer/WMSServer", {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const carte = L.tileLayer.wms('https://carto.gouv.nc/arcgis/services/fond_cartographie/MapServer/WMSServer', {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const map = L.map(mapId, {
            layers: [carte, satellite],
            scrollWheelZoom: false
        });
        map.attributionControl.setPrefix(false); // Remove the "Powered by Leaflet" prefix
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        const baseMaps = {
            "Carte": carte,
            "Satellite": satellite,
        };

        L.control.layers(baseMaps).addTo(map);

        var group = L.featureGroup(); // Create a group to hold all the layers

        shapeTypes.forEach(function(shapeTypeItem) {
            if (shapeTypeItem.type === currentShape.type) {
                shapeTypeItem.shapes.forEach(function(shapeItem) {
                    var geometry = shapeItem.geometry;
                    // No need to parse geometry if it's already GeoJSON
                    var layer = L.geoJSON(geometry, {
                        style: function() {
                            return {
                                color: '#228b22', // Border color
                                weight: 2,       // Border width
                                fillColor: '#228b22cc', // Fill color with opacity
                                fillOpacity: 0.8 // Fill opacity
                            };
                        }
                    }).addTo(map);
                    group.addLayer(layer); // Add each layer to the group

                    // Highlight current shape
                    if (shapeItem.id === currentShape.id) {
                        layer.setStyle({color: 'red', weight: 3, fillOpacity: 0.4});
                        layer.bringToFront(); // Ensure the highlighted shape is on top
                    } else {
                        layer.setStyle({fillOpacity: 0.2}); // Reduce opacity for other shapes
                    }

                    // Show tooltip on hover with additional content
                    var tooltipContent = "<strong>" + shapeItem.name + "</strong><br>";

                    


                    layer.bindTooltip(tooltipContent, {
                        permanent: false,
                        direction: 'right',
                        offset: L.point(10, 0),
                        opacity: 0.9,
                        className: 'custom-tooltip'
                    });


                    layer.on('mousemove', function(e) {
                        var tooltip = e.target.getTooltip();
                        tooltip.setLatLng(e.latlng);
                    });

                    layer.on('click', function() {
                        window.location.href = '../shape/' + shapeItem.id + '.html';
                    });
                });
            }
        });

        map.fitBounds(group.getBounds()); // Adjust the view to fit the bounds of the group

        map.attributionControl.setPrefix(false);
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        maps['allShapesMap'] = map;
    }

    function loadShapeTypeList() {
            var shapeTypeListElement = document.getElementById("shape-type-list");
            shapeTypes.forEach(function (shapeTypeItem) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = "javascript:void(0)";
                a.textContent = shapeTypeItem.type;
                a.className = "shape-type-link";
                if (shapeTypeItem.type === currentShapeType) {
                    a.classList.add("active");
                }
                a.onclick = function () {
                    if (shapeTypeItem.shapes.length > 0) {
                        // Redirect to the first shape of the selected type
                        window.location.href = "../shape/" + shapeTypeItem.shapes[0].id + ".html";
                    }
                    loadShapeList(shapeTypeItem.shapes);
                };
                li.appendChild(a);
                shapeTypeListElement.appendChild(li);
            });
        }

        function loadShapeList(shapes) {
            var shapeListElement = document.getElementById("shape-list");
            shapeListElement.innerHTML = ''; // Clear the previous list
            shapes.forEach(function (shapeItem) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = "../shape/" + shapeItem.id + ".html";
                a.textContent = shapeItem.name;
                a.className = "shape-link";
                if (shapeItem.id === shape.id) {
                    a.classList.add("active");
                }
                li.appendChild(a);
                shapeListElement.appendChild(li);
            });
        }

</script>

</body>
</html>