<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Niamoto - Thio Plateau</title>
    <link rel="stylesheet" href="../js/vendor/tailwindcss/2.2.19_dist_tailwind.css">
    <link rel="stylesheet" href="../js/vendor/leaflet/1.9.4_leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    
<script src="../js/shape_list.js"></script>

<style>
    #shape-type-list li, #shape-list li {
        list-style: none;
        text-transform: capitalize;
    }

    .shape-type-link, .shape-link {
        display: block;
        padding: 10px;
        border-radius: 5px;
        text-decoration: none;
    }

    .shape-type-link:hover, .shape-link:hover {
        background-color: #f0f0f0;
    }

    .shape-type-link.active, .shape-link.active {
        background-color: #3498db;
        color: #fff;
    }

    #shapeMap, #allShapesMap {
        position: relative;
        height: 300px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #allShapesMap {
        height: 400px;
    }

    .chart-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    .chart-container > div {
        flex: 1 1 calc(33.333% - 10px);
        margin: 5px;
    }
    .custom-tooltip {
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 5px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    font-size: 12px;
    max-width: 300px;
    word-wrap: break-word;
}
</style>

    <style>
        .gauge {
            height: 349px;
        }

        ul {
            list-style-type: none;
        }

        .loader-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <nav class="nav-bg p-4 fixed w-full top-0 shadow-md z-50 custom-nav">
    <div class="container mx-auto flex flex-wrap items-center justify-between">
        <div class="flex items-center flex-shrink-0 text-white mr-6">
            <a id="home-link" class="inline-flex items-center py-2 px-4 text-white no-underline" href="#" data-link="index.html">
                <span class="site-title">Niamoto</span>
            </a>
        </div>

        <div class="block lg:hidden">
            <button id="nav-toggle"
                class="flex items-center px-3 py-2 border rounded text-teal-200 border-teal-400 hover:text-white hover:border-white">
                <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <title>Menu</title>
                    <path d="M0 3h20v2H0zm0 6h20v2H0zm0 6h20v2H0z" />
                </svg>
            </button>
        </div>
        <div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block pt-6 lg:pt-0" id="nav-content">
            <ul class="list-reset lg:flex justify-end flex-1 items-center">
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="index.html">
                        <i class="fas fa-home menu-icon"></i>Accueil
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#introduction">Introduction</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#project">Projet</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#objective">Objectifs</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#context">Contexte</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="index.html#flora">Flore</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="methodology.html">
                        <i class="fas fa-flask menu-icon"></i>Méthodologie
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#methodes">Nos méthodes</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="methodology.html#faq">FAQ</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="trees.html">
                        <i class="fas fa-leaf menu-icon"></i>Arbres
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#learnTaxon">Étudier les
                arbres</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="trees.html#taxon">Les arbres de
                Nouvelle-Calédonie</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="plots.html">
                        <i class="fas fa-map-marked-alt menu-icon"></i>Peuplements
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#learnPlot">Étudier les
                            peuplements forestiers</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="plots.html#plot">Les
                peuplements forestiers de Nouvelle-Calédonie</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="forests.html">
                        <i class="fas fa-tree menu-icon"></i>Forêt
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#preambule">Préambule</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#learnForest">Étudier les
                forêts</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#forestPN">La forêt de la
                province Nord</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="forests.html#forestPS">La forêt de la
                province Sud</a></li>
                    </ul>
                </li>
                <li class="relative group mr-3">
                    <a class="nav-link inline-block py-2 px-4 text-white no-underline" href="#" data-link="resources.html">
                        <i class="fas fa-book menu-icon"></i>Ressources
                    </a>
                    <ul class="absolute hidden text-gray-700 pt-1 group-hover:block bg-white shadow-lg rounded-md z-50 w-48 custom-dropdown">
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#equipe">L'équipe</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#article">Articles</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#academic">Académique</a></li>
                        <li><a class="py-2 px-4 block whitespace-no-wrap hover:bg-gray-100" href="#" data-link="resources.html#media-production">Médias</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
  document.getElementById('nav-toggle').onclick = function () {
    document.getElementById('nav-content').classList.toggle('hidden');
  };

  // Function to adjust the navigation links based on page depth
  function adjustNavLinks(depth) {
    document.querySelectorAll('a[data-link]').forEach(link => {
      link.href = depth + link.getAttribute('data-link');
    });
  }

  // Adjust the navigation links based on the depth
  adjustNavLinks("../");
</script>

<style>
    .site-title {
        font-family: 'Arial Black', sans-serif; /* Custom font for a bold effect */
        font-size: 2rem; /* Increased font size */
        text-transform: uppercase; /* Uppercase letters for visibility */
        letter-spacing: 2px; /* Spacing between letters */
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7); /* Text shadow for better visibility */
        transition: color 0.3s; /* Smooth transition for hover effect */
    }

    .site-title:hover {
        color: #ffdd57; /* Change color on hover */
    }

    .text-contour {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    }

    .nav-bg {
        background-color: rgba(34, 139, 34, 0.8); /* Fond vert semi-transparent */
        transition: background-color 0.3s;
    }

    .nav-bg:hover {
        background-color: rgba(34, 139, 34, 1); /* Fond vert opaque au survol */
    }

    .group:hover .group-hover\:block {
        display: block;
    }

    .custom-nav {
        z-index: 500;
    }

    .custom-dropdown {
        z-index: 500;
    }

    .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.2); /* Fond blanc transparent au survol */
        border-radius: 4px;
    }

    .menu-icon {
        margin-right: 8px;
    }
</style>
    <div class="flex">
        
<aside class="w-1/4 p-4 mt-28">
    <h2 class="font-semibold text-lg mb-4">Shape Types</h2>
    <ul id="shape-type-list" class="list-disc pl-5">
        <!-- The list of shape types will be generated by JavaScript -->
    </ul>
</aside>

        <div class="w-full">
            
<div id="allShapesMap" class="mt-28"></div>

<div class="rounded overflow-hidden shadow-lg mb-2 mt-8">
    <div class="px-6 py-4">
        <div class="font-bold text-4xl mb-2">Thio Plateau</div>
    </div>
</div>

<div class="chart-container">
    <!-- Section for general information -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">General Information</h2>
            
                
                    
                        
                        
                            <p>Shape Area (Total Area): 6762.155770997359</p>
                        
                    
                
                    
                
            
                
                    
                        
                        
                            <p>Forest Area (Forest Area): 1076.593853828319</p>
                        
                    
                
                    
                
            
                
                    
                        
                        
                            <p>Number of Families (Number of Families): 60</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Number of Species (Number of Species): 234</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Number of Occurrences (Number of Occurrences): 980</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Average Rainfall (Average Rainfall): 1882.2115478515625</p>
                        
                    
                
                    
                        
                        
                            <p>Average Rainfall (Rainfall Range): {"min": 1460.0, "max": 2840.0}</p>
                        
                    
                
            
                
                    
                        
                        
                            <p>Altitude (Median Altitude): 249.0</p>
                        
                    
                
                    
                        
                        
                            <p>Altitude (Maximum Altitude): 885.0</p>
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        </div>
    </div>

    <!-- Section for shape map -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">Shape Map</h2>
            <div id="shapeMap" style="height: 400px; position: relative;">
                <div class="loader-container" id="shapeMapLoader">
                    <div class="loader"></div>
                </div>
                <!-- The Leaflet map will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Section for forest map -->
    <div>
        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
            <h2 class="font-bold text-xl mb-2">Forest Map</h2>
            <div id="forestMap" style="height: 400px; position: relative;">
                <div class="loader-container" id="forestMapLoader">
                    <div class="loader"></div>
                </div>
                <!-- The Leaflet map will be loaded here -->
            </div>
        </div>
    </div>
</div>

<div class="flex flex-wrap -mx-2">
    

    

    
    
        
    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
    
        
            
            

            
            
                
            
                
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Elevation Distribution</h2>
        
    
    
        <canvas id="elevationDistributionChart"></canvas>
    
    
                        </div>
                    </div>
                
            

    
        
    
        
            
            

            
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Forest Fragment Distribution</h2>
        
    
    
        <canvas id="forestFragmentationChart"></canvas>
    
    
                        </div>
                    </div>
                
            
                
                    <div class="w-1/2 px-2 mb-4">
                        <div class="rounded overflow-hidden shadow-lg p-4 bg-white">
                            
    
        
            <h2 class="font-bold text-xl mb-2">Fragmentation</h2>
        
    
    
        <div class="gauge" id="forest_fragmentationeffective_mesh_sizeGauge"></div>
    
    
                        </div>
                    </div>
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
        
            
            

            
            
                
            

    
        
    
</div>

        </div>
    </div>
    <footer class="bg-green-700 text-white p-4 mt-8">
        <div class="container mx-auto">
            <div class="flex justify-center mb-4">
                <div class="bg-white p-2 rounded-lg shadow-md flex justify-center">
                    <figure class="mx-2"><img class="img-fluid" src="../files/ps_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/pn_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/amap_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/herbarium_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/iac_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/ird_100.png"></figure>
                    <figure class="mx-2"><img class="img-fluid" src="../files/cirad_100.png"></figure>
                </div>
            </div>
            <div class="text-center">
                <p>Niamoto - Portail de la forêt de Nouvelle-Calédonie</p>
                <a class="inline-block py-2 px-4 text-white no-underline" href="https://github.com/niamoto/niamoto" target="_blank">
                    <span class="fab fa-github fa-lg" aria-hidden="true"></span> Github
                </a>
            </div>
        </div>
    </footer>
    <script src="../js/vendor/chart/4.4.2_chart.js"></script>
    <script src="../js/vendor/d3/7.8.5_d3.js"></script>
    <script src="../js/vendor/jquery/3.6.0_jquery.js"></script>
    <script src="../js/vendor/raphael/2.3.0_raphael.js"></script>
    <script src="../js/vendor/justgage/1.6.1_justgage.js"></script>
    <script src="../js/vendor/leaflet/1.9.4_leaflet.js"></script>
    
<script>
    var shape = {"elevation_elevation_distribution": {"altitudes": [-7.0, 93.0, 193.0, 293.0, 393.0, 493.0, 593.0, 693.0, 793.0], "forest": [123.3521906054295, 181.13880242058565, 215.58851331039028, 221.14491829261684, 142.24396754499978, 106.68297565874983, 48.896363843593676, 15.55793395023435, 3.333842989335932], "non_forest": [1778.0495943124972, 725.6664906787879, 634.5414489702724, 633.4301679738271, 877.9119871917954, 375.61297679851504, 201.14186035660126, 203.36442234949186, 67.78814078316395]}, "elevation_max": 885.0, "elevation_median": 249.0, "forest_area": "1076.593853828319", "forest_coordinates": "{\"type\": \"MultiPolygon\", \"coordinates\": [[[[166.17411884747347, -21.669572222220463], [166.17433596645347, -21.669477822663946], [166.17450061719052, -21.67084837737289], [166.17392156114065, -21.67080966637418], [166.17411884747347, -21.669572222220463]]], [[[166.17316541195265, -21.669761021333496], [166.17318429186395, -21.669015264837007], [166.1733919708883, -21.670563417563898], [166.17224029629878, -21.67069727062053], [166.17316541195265, -21.669761021333496]]], [[[166.16899295155457, -21.668420547630948], [166.16835103457024, -21.668042949404878], [166.17152285966924, -21.667174473484913], [166.1697292680954, -21.668127909005744], [166.17114526144317, -21.669043584703964], [166.16899295155457, -21.668420547630948]]], [[[166.16869087297377, -21.664266967144172], [166.17032398530154, -21.66393656869636], [166.17196653758495, -21.664625685458937], [166.17009742636588, -21.6657679200928], [166.16869087297377, -21.664266967144172]]], [[[166.1715618899365, -21.635372360886702], [166.1725336702581, -21.636919661592938], [166.1683918104408, -21.63386279922208], [166.17038254488602, -21.633872233982483], [166.1715618899365, -21.635372360886702]]], [[[166.15783065900607, -21.631815337774636], [166.1618224747126, -21.630097818959996], [166.16685235124118, -21.632966641595434], [166.16674854515898, -21.635505172151134], [166.16973154641815, -21.638957569840173], [166.16906167842947, -21.640486001025604], [166.16243587428926, -21.633617788838347], [166.1566985384716, -21.63233862246409], [166.15783065900607, -21.631815337774636]]], [[[166.1755842122177, -21.632737005982058], [166.17541471823415, -21.633022251954326], [166.17473260830047, -21.632724603983263], [166.17547672822815, -21.632273998027074], [166.1755842122177, -21.632737005982058]]], [[[166.1729747453067, -21.631114925254515], [166.1729936148275, -21.630473361547047], [166.17359743949336, -21.630379013943006], [166.1736729175766, -21.631473446149865], [166.1729747453067, -21.631114925254515]]], [[[166.1552260700344, -21.6298335852962], [166.15650949068709, -21.629427797883952], [166.15790615433855, -21.629890206795586], [166.1549901471203, -21.63025824654158], [166.15629083279399, -21.632144225114686], [166.1536633430618, -21.63022792879647], [166.1552260700344, -21.6298335852962]]], [[[166.1682384955839, -21.630303535859774], [166.1693989711136, -21.629794058797962], [166.1701254476647, -21.630567709151087], [166.16660628203402, -21.630662056755124], [166.1682384955839, -21.630303535859774]]], [[[166.15342361897066, -21.629824148379637], [166.15337955827727, -21.6299623172454], [166.15291526515378, -21.629477217301293], [166.15359348346882, -21.629503293216462], [166.15342361897066, -21.629824148379637]]], [[[166.17021036050832, -21.62970914595433], [166.17093683705943, -21.62899210416363], [166.17168218313134, -21.62923740793413], [166.17096514134064, -21.63037901394301], [166.17021036050832, -21.62970914595433]]], [[[166.16133460965878, -21.627546227131656], [166.1643136352559, -21.626425849333756], [166.16803093085502, -21.627973150040003], [166.16482311231766, -21.625982415594766], [166.16171907614475, -21.626661718343847], [166.1630588121221, -21.6255861556578], [166.16156811997828, -21.62474646198185], [166.15853956188863, -21.62543519949134], [166.16050199205264, -21.62298216178631], [166.15890751754438, -21.62030268983159], [166.1621153360817, -21.62113294874714], [166.16206816227978, -21.624406810607308], [166.16643645634673, -21.625435199491335], [166.17032357763318, -21.628916626080397], [166.166417586826, -21.628850582757572], [166.16424759193308, -21.630652621994724], [166.1662194568575, -21.628293931893737], [166.16457780854722, -21.62752971630102], [166.16259650886238, -21.62966197215231], [166.16353055014238, -21.62808636716485], [166.16133460965878, -21.627546227131656]]], [[[166.16361546298594, -21.622416076162075], [166.1651250246506, -21.622595336609752], [166.16428533097462, -21.624284158722055], [166.16340789825705, -21.62345389980651], [166.16361546298594, -21.622416076162075]]], [[[166.15163060482362, -21.62218968287942], [166.15355573580266, -21.62116105897395], [166.15535818686638, -21.623114500702684], [166.15113026888275, -21.623821096186557], [166.15163060482362, -21.62218968287942]]], [[[166.1628750176114, -21.616791856012597], [166.16265311742475, -21.619245996666354], [166.15993590642842, -21.619651691363725], [166.1620071327443, -21.616999393698215], [166.1628750176114, -21.616791856012597]]], [[[166.1439709469296, -21.616694952940854], [166.14412191845364, -21.616779874423123], [166.1441604762725, -21.617034796004557], [166.1438207506286, -21.616716409555284], [166.1439709469296, -21.616694952940854]]], [[[166.14167537301293, -21.61170772348321], [166.14178844957937, -21.611783107860823], [166.14172090701248, -21.611978566492958], [166.14167537301293, -21.61170772348321]]], [[[166.1475187675622, -21.609355274516652], [166.14925451370823, -21.608817570547497], [166.14853757508268, -21.611685325049667], [166.1472884490979, -21.610406630035705], [166.1475187675622, -21.609355274516652]]], [[[166.1643560820042, -21.603136819652015], [166.16458248675215, -21.60270287721845], [166.1639787407576, -21.601674622321525], [166.16539377043227, -21.602985883153384], [166.1651767992155, -21.604249976329424], [166.1643560820042, -21.603136819652015]]], [[[166.14322228968706, -21.588984588946904], [166.14194275304115, -21.59334290791956], [166.15046781012342, -21.591852643759097], [166.15341490110657, -21.595105255115158], [166.15297163170385, -21.5969443515733], [166.15160409844012, -21.596567101017783], [166.15213224921783, -21.598179847142614], [166.15402793325927, -21.598670272864794], [166.15710252528675, -21.596642551128898], [166.1566403933562, -21.599113542267528], [166.160304380369, -21.601658113642003], [166.15897425247482, -21.602959940942696], [166.1625023931304, -21.61052327455381], [166.16524840829302, -21.611098719954843], [166.16864362191848, -21.609013909567498], [166.16752103170992, -21.611447760607927], [166.1700963857178, -21.61253261669184], [166.16551168957187, -21.61302316031239], [166.16302595411005, -21.6115609629819], [166.16361083304224, -21.61523532337046], [166.1608939760669, -21.61583671098219], [166.16029966360344, -21.613494836870604], [166.16198826568186, -21.611756708753553], [166.16092227666027, -21.612096315875473], [166.16100246167525, -21.6106553439901], [166.1592383913475, -21.611711899480518], [166.1595308308136, -21.613277865653817], [166.1589176512879, -21.61467402826616], [166.1587572812581, -21.61173076654285], [166.1601628774016, -21.610410072179825], [166.1585308765101, -21.61021668479095], [166.15947422962654, -21.608084706747782], [166.1572290492094, -21.60701635934341], [166.15868214992057, -21.603692218799342], [166.15692717621215, -21.603101443910163], [166.15532347591417, -21.60525228901566], [166.15531404238303, -21.60363915518654], [166.1577856275481, -21.602110923137896], [166.1514343356901, -21.598170415878727], [166.1521605430095, -21.601499652031162], [166.15087789112073, -21.603885761794803], [166.15370036026667, -21.606463018079673], [166.15408913272918, -21.60520457721088], [166.15637201624736, -21.609421308337428], [166.15488953348066, -21.615185797331833], [166.14991485191598, -21.61497758268538], [166.15243357050835, -21.613600305852103], [166.1517078423429, -21.612081530113393], [166.15013031700823, -21.61322126446682], [166.1500479398986, -21.61038390261357], [166.15249063724556, -21.608893762919283], [166.15253779356502, -21.610544234099667], [166.15343376363435, -21.60837504340545], [166.150434621718, -21.604055524544783], [166.15105488850324, -21.60689022961643], [166.14794327069572, -21.607704428997312], [166.14867097537098, -21.60618699018345], [166.1470470974138, -21.60658185404416], [166.15081187227352, -21.60231074072552], [166.15109481019016, -21.597774302795436], [166.14896999267498, -21.6032476636432], [166.14491261671165, -21.606177558919562], [166.14810210780786, -21.602002437529492], [166.14582862679723, -21.602266576402094], [166.14552564886435, -21.600905482406223], [166.1491661167251, -21.599773730739674], [166.14958109233615, -21.59856652896202], [166.1479872087391, -21.598236434725944], [166.150519503093, -21.597312170864928], [166.1509156161763, -21.594379047795787], [166.1495009265931, -21.593435921406996], [166.14685226825333, -21.594117694895093], [166.14585251855257, -21.59729614441539], [166.14556957052406, -21.593891336472282], [166.14435289400143, -21.594287463712185], [166.14513100107987, -21.59887122177411], [166.14296644866175, -21.594900517773976], [166.14488106365468, -21.60060663634899], [166.14461845241198, -21.606821169561073], [166.1428921506841, -21.607707903781943], [166.14451468564138, -21.61217930825738], [166.14266575045747, -21.612000074744653], [166.14156595321762, -21.604195857639233], [166.13860904902265, -21.60140832242977], [166.14030673719373, -21.600059603493857], [166.13990971739776, -21.59668287319084], [166.13784549398446, -21.600129873595634], [166.13696607608384, -21.59636851971982], [166.13770326903025, -21.593104629468556], [166.14113735468277, -21.593634655950762], [166.140987829632, -21.590918097511995], [166.13907490399936, -21.59188775892828], [166.13838260406177, -21.59130895124536], [166.14095951004876, -21.590394185221957], [166.14025414627037, -21.58781343951627], [166.14322228968706, -21.588984588946904]], [[166.15366462959562, -21.611657024840763], [166.1532457293815, -21.610693342667012], [166.15314107573093, -21.613307870360103], [166.15374481352086, -21.612392830272242], [166.15366462959562, -21.611657024840763]]], [[[166.17194205585795, -21.598431489251897], [166.17216704580838, -21.597891776324598], [166.173875477629, -21.60165700264552], [166.1718288799494, -21.60041206765149], [166.17194205585795, -21.598431489251897]]], [[[166.1621486357117, -21.599721881370503], [166.16223428224464, -21.60024693185505], [166.16077065055168, -21.599193068803164], [166.16121392286016, -21.599221362780302], [166.1621486357117, -21.599721881370503]]], [[[166.167959690909, -21.599410574842075], [166.16909171464874, -21.599155869500635], [166.16832424903725, -21.600847957884067], [166.16794082384666, -21.60035392795852], [166.167959690909, -21.599410574842075]]], [[[166.17375287039474, -21.598346607320487], [166.17469128730312, -21.597816095249165], [166.17684162956553, -21.599070461568907], [166.17624745604564, -21.599343970014566], [166.17375287039474, -21.598346607320487]]], [[[166.1729276293949, -21.596109025295227], [166.17346521496052, -21.596071299992378], [166.17380474268614, -21.596580591580846], [166.1722297112922, -21.595986418060967], [166.1729276293949, -21.596109025295227]]], [[[166.16470351337372, -21.588554533399623], [166.1628549735341, -21.588799747868144], [166.16357175428826, -21.59042193589067], [166.15822890827218, -21.588759664733868], [166.16470351337372, -21.588554533399623]]], [[[166.1523455059884, -21.588197685941072], [166.15191492616916, -21.587801141549825], [166.1540071450871, -21.587798935004614], [166.1534557077136, -21.588353125220678], [166.1523455059884, -21.588197685941072]]], [[[166.16559477365357, -21.588210290011123], [166.16544287841413, -21.587786874382083], [166.16631147644102, -21.587785958320765], [166.16603804596204, -21.588163133382558], [166.16559477365357, -21.588210290011123]]], [[[166.1828696863626, -21.671007095479524], [166.18329448436694, -21.67124309437082], [166.18335899535077, -21.67144057680789], [166.18265404489412, -21.67139344952854], [166.1828696863626, -21.671007095479524]]], [[[166.1758463593577, -21.67091269592301], [166.1761201180716, -21.670110299692613], [166.17730015126338, -21.671035531552384], [166.17585962625347, -21.670939229714563], [166.1758463593577, -21.67091269592301]]], [[[166.1844744788234, -21.669383423107423], [166.1844555989121, -21.6681939886953], [166.18600340087605, -21.671617360348804], [166.18553334152628, -21.671585935986883], [166.1844744788234, -21.669383423107423]]], [[[166.18084953585316, -21.667259433085782], [166.1802925784697, -21.669185184038742], [166.17838703881503, -21.67110819205325], [166.1787066659202, -21.666636396012763], [166.18084953585316, -21.667259433085782]]], [[[166.18704185803708, -21.670588462984654], [166.1857384772361, -21.66806670447843], [166.1870513028255, -21.66632886341047], [166.18341505928657, -21.66429823390171], [166.1860029313117, -21.663438758156143], [166.1886002481252, -21.66626274989158], [166.18849635545266, -21.665091596128388], [166.19140535028382, -21.66553550118379], [166.1926142832006, -21.669898993430515], [166.19421045244238, -21.6712118190199], [166.19363861649583, -21.663741810209896], [166.19573100705432, -21.664558546063486], [166.19651498081515, -21.66785891913334], [166.1992647314905, -21.66508161426612], [166.19846236397288, -21.662872743688155], [166.20127476794005, -21.661536606618967], [166.20118070629107, -21.663967666307258], [166.20263520370662, -21.661115340206585], [166.2043604016586, -21.66167814945009], [166.20068013250517, -21.666054964546493], [166.20290251049798, -21.668649133882994], [166.20100286996842, -21.672620103397367], [166.1936437651376, -21.672099629130706], [166.19172436476424, -21.67054925763045], [166.1914371709432, -21.67198061821672], [166.1874127957177, -21.67171158107565], [166.18704185803708, -21.670588462984654]], [[166.20052901589057, -21.666904995503646], [166.20102958967644, -21.66667832058174], [166.2003306753339, -21.66624386031475], [166.1999623285858, -21.666923885080475], [166.20052901589057, -21.666904995503646]], [[166.1881563430698, -21.668784508397806], [166.1879391129363, -21.66736779013588], [166.18695685494137, -21.66733945577064], [166.18796744730153, -21.670390122427985], [166.1881563430698, -21.668784508397806]], [[166.19188942502936, -21.6684660035843], [166.19147363790574, -21.667606080215002], [166.19128464375865, -21.667492683726742], [166.19132244258807, -21.66857940007256], [166.19188942502936, -21.6684660035843]], [[166.194976111955, -21.66856420818432], [166.1953913042596, -21.668120707313463], [166.19464491270938, -21.66562994906792], [166.19405136545828, -21.667677206442605], [166.194976111955, -21.66856420818432]]], [[[166.18252984795916, -21.66575848013715], [166.1829546459635, -21.66640039712147], [166.1811704943453, -21.66630599756495], [166.1814064932366, -21.665503601334553], [166.18252984795916, -21.66575848013715]]], [[[166.17426601348026, -21.660699805789882], [166.17742840582537, -21.661181244624515], [166.17561593021264, -21.661709883344894], [166.17728680616813, -21.663541238911925], [166.17542713066965, -21.663569558843374], [166.17426601348026, -21.660699805789882]]], [[[166.1938099079946, -21.65897086489174], [166.19432781135257, -21.659719911324736], [166.1935348834528, -21.66131520674216], [166.1925604476371, -21.65998199452379], [166.1938099079946, -21.65897086489174]]], [[[166.1851408671566, -21.65993516764075], [166.1838853501957, -21.657509093513294], [166.1872365420838, -21.66024668688669], [166.1874631015354, -21.66231404188246], [166.1851408671566, -21.65993516764075]]], [[[166.18861993674665, -21.65470890233446], [166.185789982215, -21.656625070378922], [166.18469507641862, -21.654161686231035], [166.19328070838617, -21.653161601628224], [166.1940729416705, -21.657378886096808], [166.19883994868704, -21.658823147628553], [166.19558328052722, -21.65865323450717], [166.19524345428445, -21.66065443349234], [166.19220514570014, -21.655142901313038], [166.19125223489934, -21.65629394208231], [166.18861993674665, -21.65470890233446]]], [[[166.1781269641344, -21.656801095227074], [166.17621064877304, -21.655715497854867], [166.1795335207297, -21.65439390105392], [166.17990167983854, -21.655668297969118], [166.18117607675376, -21.654223981465226], [166.1833755914296, -21.656876615044272], [166.18060967812477, -21.658141571982323], [166.1781269641344, -21.656801095227074]]], [[[166.18949736946428, -21.650505716574518], [166.19071445355638, -21.65133597549006], [166.19141262582627, -21.65272288526943], [166.18947849994348, -21.65106236743835], [166.18949736946428, -21.650505716574518]]], [[[166.1757103299841, -21.649324633324564], [166.17750392564253, -21.649843832067795], [166.17815528406587, -21.650344150856725], [166.17681480731062, -21.650145911336583], [166.1757103299841, -21.649324633324564]]], [[[166.1863744637706, -21.648675373056165], [166.18712924460291, -21.648109287431932], [166.1871198098425, -21.64968489241938], [166.18628011616656, -21.649420719128074], [166.1863744637706, -21.648675373056165]]], [[[166.18998797700527, -21.647562071328508], [166.191242800139, -21.647043159506293], [166.19108240921213, -21.64839233024405], [166.19409209778098, -21.65016606519998], [166.1927051880016, -21.65014719567917], [166.18998797700527, -21.647562071328508]]], [[[166.1893387211269, -21.640975015002173], [166.1878944110563, -21.63976894164425], [166.1879986396181, -21.63929991311617], [166.190522459793, -21.64213641897647], [166.1893387211269, -21.640975015002173]]], [[[166.17658118247138, -21.636815879228486], [166.1773453980641, -21.635372360886695], [166.17782657084467, -21.63522140472023], [166.1783643521877, -21.63702344395737], [166.17658118247138, -21.636815879228486]]], [[[166.18673298466592, -21.63350427832673], [166.1852574555299, -21.633098246673633], [166.18580837814636, -21.631947542860086], [166.18707263604045, -21.632664584650783], [166.18673298466592, -21.63350427832673]]], [[[166.19305197353845, -21.631908091645567], [166.19224718235634, -21.636439312241603], [166.18954141292602, -21.628127881637806], [166.19307294408475, -21.629365412900874], [166.19305197353845, -21.631908091645567]]], [[[166.18929459260448, -21.632768980682407], [166.18760601347327, -21.629910659583203], [166.18554953162632, -21.62984462576243], [166.18487032661267, -21.628005112183736], [166.18683247442993, -21.629306921793273], [166.1885304869641, -21.62765607627393], [166.18929459260448, -21.632768980682407]]], [[[166.1835773004407, -21.63020286422845], [166.18303574649335, -21.630512914198306], [166.18301982775256, -21.629255564518278], [166.18349462044873, -21.6294504763016], [166.1835773004407, -21.63020286422845]]], [[[166.17528862029607, -21.628164203938127], [166.17568488023304, -21.627258466939356], [166.17591131448273, -21.62722072789774], [166.17565657595182, -21.628768028603975], [166.17528862029607, -21.628164203938127]]], [[[166.19587258855415, -21.62882346615334], [166.19387265420667, -21.62768007341588], [166.19283453497854, -21.623612533531055], [166.1943728389257, -21.627453574675194], [166.19587258855415, -21.62882346615334]]], [[[166.19407084060475, -21.62173448147287], [166.19465596235153, -21.621507982732187], [166.19740225958233, -21.624254279963008], [166.19490133598725, -21.622706538568316], [166.19407084060475, -21.62173448147287]]], [[[166.19604326713826, -21.617468755189943], [166.19645851482952, -21.61844081228539], [166.19718519828922, -21.61858237399832], [166.1962188475574, -21.61846605197064], [166.19604326713826, -21.617468755189943]]], [[[166.18930874270896, -21.60624225153734], [166.18742206211544, -21.607704428997327], [166.1867617239077, -21.60751576093797], [166.18825220157657, -21.606468653208562], [166.18930874270896, -21.60624225153734]]], [[[166.18952571097722, -21.605808315000825], [166.18912007464962, -21.606006416463146], [166.18880877235168, -21.605487579299925], [166.18939364333568, -21.605214010613864], [166.18952571097722, -21.605808315000825]]], [[[166.18032814308376, -21.598478560894947], [166.1817714537378, -21.596412645645028], [166.18077151302322, -21.601016146293247], [166.18032814308376, -21.60068597718938], [166.18032814308376, -21.598478560894947]]], [[[166.19540422455796, -21.588631041453443], [166.19627368456824, -21.587754358870864], [166.19825055266233, -21.587752273979657], [166.19527967372065, -21.58908294155346], [166.19158614486744, -21.58797828890203], [166.19540422455796, -21.588631041453443]]], [[[166.22206389255544, -21.673252114041972], [166.22398034068962, -21.67341260477242], [166.22383873122158, -21.67414672417231], [166.22106318564795, -21.67392239885737], [166.22206389255544, -21.673252114041972]]], [[[166.22426355962568, -21.67294057321228], [166.2249338444411, -21.67379023002053], [166.22497235113983, -21.674222508820804], [166.22437324750254, -21.67418245760273], [166.22426355962568, -21.67294057321228]]], [[[166.22515097895877, -21.673195470254754], [166.22467894739862, -21.67123181896457], [166.22613280460385, -21.67405456769421], [166.22816254031244, -21.67071258424842], [166.228534991179, -21.674460678086117], [166.2256314545662, -21.674266571138944], [166.22515097895877, -21.673195470254754]]], [[[166.21366404988694, -21.672125137528276], [166.21416446613094, -21.67115263048803], [166.21449418477224, -21.67352202346215], [166.21343438092444, -21.67345117355842], [166.21366404988694, -21.672125137528276]]], [[[166.20197406851773, -21.67169350322895], [166.20221018822804, -21.671731282382602], [166.20229995165042, -21.67270681577579], [166.20166030466686, -21.67266405415787], [166.20197406851773, -21.67169350322895]]], [[[166.20268242764868, -21.671041812828467], [166.20317355664616, -21.671013478463227], [166.2032758913798, -21.672772059203634], [166.20254041068566, -21.67272289091982], [166.20268242764868, -21.671041812828467]]], [[[166.20468472279222, -21.672770209108016], [166.2066379011701, -21.67120349707097], [166.20426830273826, -21.66737060080263], [166.2054011784826, -21.66393421104481], [166.2067373054634, -21.66761689021078], [166.20725154219832, -21.664906596058703], [166.20797847080095, -21.666860806717683], [166.20895085581483, -21.66618108127108], [166.20845994299228, -21.664311836292928], [166.2115018740402, -21.665666935435766], [166.21324860998627, -21.669330360014555], [166.21147279453422, -21.67332003777589], [166.20468472279222, -21.672770209108016]], [[166.21074457574335, -21.66840907023494], [166.21030086607684, -21.668050326249233], [166.21014037534638, -21.668097529405248], [166.21031974733924, -21.668767814220647], [166.21074457574335, -21.66840907023494]], [[166.20783686133285, -21.672440219758535], [166.20807287711293, -21.672477982283347], [166.208308892893, -21.671732172418324], [166.20786518322646, -21.671864341255162], [166.20783686133285, -21.672440219758535]]], [[[166.21584991305264, -21.67287852534169], [166.2174077850898, -21.67299182512621], [166.21530229742743, -21.670046030728724], [166.2175588514691, -21.671556694522305], [166.2195510393469, -21.670933545707452], [166.21645417857005, -21.668969682775796], [166.21704900243876, -21.668016076256098], [166.21529285577873, -21.668119934391907], [166.215934887891, -21.663739009390518], [166.2186068744759, -21.667572318766737], [166.21539671391454, -21.66007564969108], [166.2196548974827, -21.665013631966353], [166.22043855432563, -21.670536996461642], [166.2227517582596, -21.66643932092155], [166.21899398207304, -21.659150368117512], [166.221533785576, -21.66014174123205], [166.222411858906, -21.663587943011166], [166.22309165761314, -21.660349457503667], [166.22165652700923, -21.657328129916504], [166.22298779947732, -21.65913148482009], [166.2244890216222, -21.65749807959328], [166.2236109482922, -21.663578501362455], [166.22856726848295, -21.65979285744778], [166.22583917738768, -21.669857197754528], [166.22033377313633, -21.673912411055372], [166.21584991305264, -21.67287852534169]], [[166.2182764167711, -21.6696400398342], [166.21869184931433, -21.668979124424506], [166.2176155013614, -21.66871475826063], [166.21754940982044, -21.669215165642253], [166.2182764167711, -21.6696400398342]]], [[[166.2108196451366, -21.659530191519067], [166.21092348456656, -21.6603986667513], [166.21073468560303, -21.66052138607759], [166.21018097847883, -21.659786462899064], [166.2108196451366, -21.659530191519067]]], [[[166.22782571177643, -21.65773188139148], [166.22804283058449, -21.658430437556536], [166.22736315431578, -21.658619236520064], [166.22736315431578, -21.658241638593008], [166.22782571177643, -21.65773188139148]]], [[[166.22637432612265, -21.657857194152186], [166.22606520011252, -21.65661545870376], [166.22682134608698, -21.657076327386726], [166.22639381503592, -21.659308403708987], [166.22637432612265, -21.657857194152186]]], [[[166.20551911423559, -21.656964885602132], [166.20602887143713, -21.65650232814149], [166.20645366910506, -21.657021525291192], [166.20590615211083, -21.657606802078128], [166.20551911423559, -21.656964885602132]]], [[[166.22724043498948, -21.655532373466375], [166.2281561099626, -21.65461669849326], [166.22857480253134, -21.656360140108497], [166.22715547545593, -21.65718436439725], [166.22724043498948, -21.655532373466375]]], [[[166.1976476332181, -21.655341232122193], [166.19776088258845, -21.656624724986084], [166.19609989182342, -21.654614548662494], [166.19624145353635, -21.654586236319908], [166.1976476332181, -21.655341232122193]]], [[[166.19846869115315, -21.653859552860204], [166.19797794388165, -21.652236311885286], [166.19584508074018, -21.652009813144602], [166.19985599593986, -21.651349191817598], [166.198591377971, -21.6527364966043], [166.19962005975162, -21.6571909718378], [166.19846869115315, -21.653859552860204]]], [[[166.20773278208296, -21.652955267614193], [166.20887501581228, -21.654975416523946], [166.20868621684878, -21.65525861496924], [166.2071097455033, -21.654352379944303], [166.20773278208296, -21.652955267614193]]], [[[166.20845493811845, -21.652320431099334], [166.20869093682288, -21.650451321360404], [166.21065444604355, -21.649648925765405], [166.20987093034492, -21.65172571436422], [166.21193827899555, -21.652839628249037], [166.20845493811845, -21.652320431099334]]], [[[166.2055068985907, -21.650760479076002], [166.2069600716569, -21.65093976666209], [166.2071110506768, -21.651628608440234], [166.20544084526952, -21.65116623519189], [166.2055068985907, -21.650760479076002]]], [[[166.20277632085939, -21.643553987263378], [166.20276874996708, -21.64546059030003], [166.20555231469157, -21.647323029798432], [166.20329963387076, -21.646491405080624], [166.1999170472121, -21.643098471911802], [166.20277632085939, -21.643553987263378]]], [[[166.22561902261597, -21.63709184907485], [166.22813990313466, -21.63838960246016], [166.22860415144066, -21.642987978868852], [166.22526802103746, -21.640812097191766], [166.2242304686121, -21.63769472376826], [166.2234098589666, -21.639923103409117], [166.22859993325434, -21.6449098992726], [166.22850066807104, -21.646061745458375], [166.22598020190793, -21.64454191380197], [166.22481908828223, -21.64593902613208], [166.22859525072857, -21.647043385355452], [166.22704219607775, -21.647935575171395], [166.22793899115453, -21.649861324599385], [166.22604156157107, -21.652126912161727], [166.2239128532573, -21.652176471889653], [166.22433765092526, -21.649240648006785], [166.22318597724774, -21.64996752401637], [166.22338421615945, -21.648353292878202], [166.22197766388115, -21.648091334316295], [166.22058055155102, -21.6431636813682], [166.22161894585042, -21.650722719870465], [166.21880584129386, -21.651647834791753], [166.21848960302995, -21.64859873153079], [166.21686727094337, -21.649722855288637], [166.2193155984954, -21.640914613715168], [166.21697449134763, -21.641263891797696], [166.21861312075367, -21.63395688490816], [166.2174525471118, -21.630824279630986], [166.2199671233358, -21.629416022589965], [166.2214907443036, -21.62990241388978], [166.22358094207425, -21.633353009192074], [166.21933494094554, -21.630595467347938], [166.2267690338135, -21.63586601207296], [166.22561902261597, -21.63709184907485]], [[166.2227684629218, -21.63946092096509], [166.222381738836, -21.63884782180464], [166.2215894260748, -21.638781795741206], [166.2224571971942, -21.639998561767328], [166.2227684629218, -21.63946092096509]], [[166.2185887224858, -21.63953638128141], [166.21799400575068, -21.639489181540526], [166.21779576683898, -21.639895099312113], [166.2185132029004, -21.64002725858658], [166.2185887224858, -21.63953638128141]]], [[[166.20683026966353, -21.621309796334085], [166.20669250205958, -21.622845068820066], [166.20638179970442, -21.623154626124418], [166.20557058744626, -21.621568211703927], [166.20683026966353, -21.621309796334085]]], [[[166.1980723183569, -21.619875304309737], [166.199752184017, -21.617138444526443], [166.1985630656284, -21.619941366442436], [166.20043168023906, -21.618733373158776], [166.19985599593983, -21.62177223126298], [166.20117723859383, -21.619441181723417], [166.20253623103793, -21.620394363923804], [166.20182842247328, -21.62351815905577], [166.201073426671, -21.623650283321172], [166.1980723183569, -21.619875304309737]]], [[[166.20823214906213, -21.614958715879446], [166.20905285512032, -21.61591148957918], [166.20887362046395, -21.61647749375724], [166.20805291440576, -21.61570395471389], [166.20823214906213, -21.614958715879446]]], [[[166.2047087730537, -21.612779599793914], [166.20410503526378, -21.61368520647881], [166.20332206281745, -21.613468238210555], [166.2045295383973, -21.612581498331593], [166.2047087730537, -21.612779599793914]]], [[[166.20453897180028, -21.60988354508284], [166.20742559310838, -21.610449549260903], [166.20804819770424, -21.612260762630694], [166.204879070802, -21.610531470918254], [166.20453897180028, -21.60988354508284]]], [[[166.20766142818263, -21.60503477595746], [166.2078783964509, -21.60387446739244], [166.2089821045981, -21.603525431482634], [166.20873683612095, -21.604874408107012], [166.20766142818263, -21.60503477595746]]], [[[166.19920018243172, -21.602193088897486], [166.19767981782155, -21.600494474643288], [166.19859203658768, -21.597107731408098], [166.20210460310093, -21.601228443765482], [166.20229579402798, -21.604139098921483], [166.19920018243172, -21.602193088897486]]], [[[166.20387527819005, -21.588189118302676], [166.2042251275587, -21.588355191215335], [166.2071256836618, -21.588423890506423], [166.20269414166137, -21.59040398550556], [166.20152482284647, -21.588546473311492], [166.20387527819005, -21.588189118302676]]]]}", "forest_cover_percentage": null, "forest_fragmentation_effective_mesh_size": 1.791561790257063, "forest_fragmentation_fragment_size_distribution": {"10": 15.94969447482435, "100": 31.74028829416622, "1000": 100.0, "1100": 100.0, "1200": 100.0, "12000": 100.0, "125": 31.74028829416622, "1300": 100.0, "1400": 100.0, "150": 31.74028829416622, "1500": 100.0, "1600": 100.0, "1700": 100.0, "17000": 100.0, "175": 31.74028829416622, "1800": 100.0, "1900": 100.0, "20": 20.49788493486991, "200": 48.29107156531324, "2000": 100.0, "225": 48.29107156531324, "250": 48.29107156531324, "27000": 100.0, "275": 72.64585393145983, "30": 24.573450263717923, "300": 100.0, "325": 100.0, "350": 100.0, "375": 100.0, "40": 27.457207610808826, "400": 100.0, "425": 100.0, "450": 100.0, "475": 100.0, "50": 31.74028829416622, "500": 100.0, "500000": 100.0, "60": 31.74028829416622, "600": 100.0, "70": 31.74028829416622, "700": 100.0, "7000": 100.0, "80": 31.74028829416622, "800": 100.0, "90": 31.74028829416622, "900": 100.0}, "forest_humidity_category_distribution": null, "frequencies": {}, "id": 124, "land_use_category_distribution": null, "name": "Thio Plateau", "num_families_unique_taxonomic_count": 60, "num_occurrences_count": 980, "num_species_unique_taxonomic_count": 234, "rainfall_mean": "1882.2115478515625", "rainfall_range": "{\"min\": 1460.0, \"max\": 2840.0}", "shape_area": "6762.155770997359", "shape_coordinates": "{\"type\": \"FeatureCollection\", \"features\": [{\"id\": \"0\", \"type\": \"Feature\", \"properties\": {}, \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[166.228534991179, -21.674460678086117], [166.16002364176592, -21.66988056402018], [166.16050277791427, -21.663645345805875], [166.16493203053952, -21.658698112055117], [166.16924423962587, -21.642944409340526], [166.16820967004028, -21.640062180617953], [166.16139785763457, -21.633307686746246], [166.1578021982124, -21.632864856313734], [166.1529712837817, -21.62958018815346], [166.1511339860784, -21.62003878928913], [166.14553042961535, -21.618318698436834], [166.14202692705908, -21.613798819299657], [166.14156595321762, -21.604195857639233], [166.1386430083646, -21.601704561217577], [166.13696607608384, -21.59636851971982], [166.14025414627037, -21.58781343951627], [166.21230212391117, -21.587737454580505], [166.20724077362868, -21.594022178903337], [166.2154475304357, -21.594472233511027], [166.22163424144998, -21.600275555297156], [166.2216111070029, -21.61944072751779], [166.21568541454457, -21.625085375750892], [166.2199348855647, -21.627995791485667], [166.22813990313466, -21.63838960246016], [166.228534991179, -21.674460678086117]]]}, \"bbox\": [166.13696607608384, -21.674460678086117, 166.228534991179, -21.587737454580505]}], \"bbox\": [166.13696607608384, -21.674460678086117, 166.228534991179, -21.587737454580505]}", "shape_id": 124, "type": "mines"};
    var mapping = {"fields": {"elevation": {"data_source": {"name": "elevation", "type": "layer"}, "description": "Altitude metrics within the shape", "field_type": "JSON", "label": "Altitude", "transformations": [{"chart_options": {"title": "Median Altitude"}, "chart_type": "text", "name": "median"}, {"chart_options": {"title": "Maximum Altitude"}, "chart_type": "text", "name": "max"}, {"chart_options": {"title": "Elevation Distribution", "x_label": "Elevation (m)", "y_label": "Area (ha)"}, "chart_type": "stacked_bar", "data_structure": {"x_field": "altitudes", "y_fields": [{"color": "#4BC0C0", "label": "For\u00eat", "name": "forest"}, {"color": "#FF6384", "label": "Hors-for\u00eat", "name": "non_forest"}]}, "name": "elevation_distribution"}]}, "forest": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Area covered by forest within the shape", "field_type": "TEXT", "label": "Forest Area", "transformations": [{"chart_options": {"title": "Forest Area"}, "chart_type": "text", "name": "area"}, {"chart_options": {"coordinates_field": "forest_coordinates", "title": "Forest Location"}, "chart_type": "map", "name": "coordinates"}]}, "forest_cover": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Area covered by forest within the shape", "field_type": "JSON", "label": "Forest Area", "transformations": [{"chart_options": {"categories": ["UM", "Non-UM", "Commune"], "title": "Forest Cover"}, "chart_type": "donut", "layer_params": {"forest_cover": [{"name": "area"}, {"attribute": "cover_type"}], "soil_types": [{"attribute": "soil_category"}]}, "name": "percentage"}]}, "forest_fragmentation": {"data_source": {"name": "forest_cover", "type": "layer"}, "description": "Analysis of forest fragmentation", "field_type": "JSON", "label": "Forest Fragmentation", "transformations": [{"chart_options": {"bins": [10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 125, 150, 175, 200, 225, 250, 275, 300, 325, 350, 375, 400, 425, 450, 475, 500, 600, 700, 800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 7000, 12000, 17000, 27000, 500000], "title": "Forest Fragment Distribution", "x_label": "Area (ha)", "y_label": "Cumulative Area (%)"}, "chart_type": "line", "data_structure": {"color": "#4BC0C0", "x_field": "keys", "y_field": "values"}, "name": "fragment_size_distribution"}, {"chart_options": {"label": "Effective Mesh Size (km\u00b2)", "max": 1000, "min": 0, "title": "Fragmentation"}, "chart_type": "gauge", "name": "effective_mesh_size"}]}, "forest_humidity": {"data_source": [{"name": "forest_cover", "type": "layer"}, {"name": "holdridge", "type": "shape"}], "description": "Distribution of forests by humidity level", "field_type": "JSON", "label": "Forest and Living Environments", "transformations": [{"chart_options": {"categories": ["Dry", "Humid", "Very Humid"], "title": "Forest and Living Environments", "x_label": "Category", "y_label": "Frequency (%)"}, "chart_type": "stacked_bar", "layer_params": {"forest_cover": [{"name": "area"}], "humidity": [{"name": "value"}]}, "name": "category_distribution"}]}, "land_use": {"data_source": [{"name": "ultramafic", "type": "shape"}, {"name": "holdridge", "type": "shape"}, {"name": "forest_cover", "type": "layer"}], "description": "Land use distribution", "field_type": "JSON", "label": "Land Use", "transformations": [{"chart_options": {"title": "Land Use", "x_label": "Category", "y_label": "Area (ha)"}, "chart_type": "bar", "name": "category_distribution"}]}, "num_families": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of families in the zone", "field_type": "INTEGER", "label": "Number of Families", "transformations": [{"chart_options": {"title": "Number of Families"}, "chart_type": "text", "name": "unique_taxonomic_count", "target_ranks": ["family"]}]}, "num_occurrences": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of occurrences in the zone", "field_type": "INTEGER", "label": "Number of Occurrences", "source_field": "id_occurrence", "transformations": [{"chart_options": {"title": "Number of Occurrences"}, "chart_type": "text", "name": "count"}]}, "num_species": {"data_source": {"name": "occurrences", "type": "source"}, "description": "Total number of species in the zone", "field_type": "INTEGER", "label": "Number of Species", "transformations": [{"chart_options": {"title": "Number of Species"}, "chart_type": "text", "name": "unique_taxonomic_count", "target_ranks": ["species", "infra"]}]}, "rainfall": {"data_source": {"name": "rainfall", "type": "layer"}, "description": "Average annual rainfall within the shape", "field_type": "TEXT", "label": "Average Rainfall", "transformations": [{"chart_options": {"title": "Average Rainfall"}, "chart_type": "text", "name": "mean"}, {"chart_options": {"title": "Rainfall Range"}, "chart_type": "text", "name": "range"}]}, "shape": {"data_source": {"name": "self", "type": "shape"}, "description": "Total area of the reference zone", "field_type": "TEXT", "label": "Shape Area", "transformations": [{"chart_options": {"title": "Total Area"}, "chart_type": "text", "name": "area"}, {"chart_options": {"coordinates_field": "shape_coordinates", "title": "Location"}, "chart_type": "map", "name": "coordinates"}]}}, "group_by": "shape", "source_location_field": "geo_pt", "source_table_name": "occurrences"};
    var currentShapeType = "mines";

    document.addEventListener('DOMContentLoaded', function () {
        loadShapeCharts(shape, mapping);
        loadShapeTypeList();
        initShapeMaps(mapping, shape);
        loadAllShapesMap(shape);
    });

    function loadShapeCharts(shape, mapping) {
        Object.entries(mapping.fields).forEach(function([field_key, field]) {
            if (field.field_type !== 'TEXT' && shape[field_key] !== null) {
                // Handle bins chart if present
                if (field.bins && field.bins.values && field.bins.values.length > 0) {
                    var binChartId = field_key + 'BinChart';
                    var binCtx = document.getElementById(binChartId);
                    if (binCtx) {
                        createBinChart(binCtx, field, shape);
                    }
                }

                // Handle transformations
                field.transformations.forEach(function(transformation) {
                    var transformationName = transformation.name ? transformation.name : '';
                    var valueKey = field_key + '_' + transformationName;

                    if (shape[valueKey] !== null) {
                        switch(transformation.chart_type) {
                            case 'pie':
                                var pieChartId = field_key + 'PieChart';
                                var pieCtx = document.getElementById(pieChartId);
                                if (pieCtx) {
                                    createPieChart(pieCtx, transformation, shape[valueKey]);
                                }
                                break;
                            case 'gauge':
                                var gaugeId = field_key + transformationName + 'Gauge';
                                var gaugeElement = document.getElementById(gaugeId);
                                if (gaugeElement) {
                                    createGauge({
                                        id: gaugeId,
                                        value: parseFloat(shape[valueKey]),
                                        min: 0,
                                        max: transformation.chart_options.max,
                                        title: transformation.chart_options.title,
                                        label: transformation.chart_options.label
                                    });
                                }
                                break;
                            case 'bar':
                                var barChartId = field_key + transformationName + 'BarChart';
                                var barCtx = document.getElementById(barChartId);
                                if (barCtx) {
                                    createBarChart(barCtx, field, transformation, shape[valueKey]);
                                }
                                break;
                            case 'stacked_bar':
                                if (field_key === 'elevation' && transformationName === 'elevation_distribution') {
                                    var stackedBarChartId = 'elevationDistributionChart';
                                    var stackedBarCtx = document.getElementById(stackedBarChartId);
                                    if (stackedBarCtx) {
                                        createElevationDistributionChart(stackedBarCtx, shape.elevation_elevation_distribution, transformation);
                                    }
                                }
                                break;
                            case 'line':
                                if (field_key === 'forest_fragmentation' && transformationName === 'fragment_size_distribution') {
                                    var lineChartId = 'forestFragmentationChart';
                                    var lineCtx = document.getElementById(lineChartId);
                                    if (lineCtx) {
                                        createForestFragmentationChart(lineCtx, shape.forest_fragmentation_fragment_size_distribution, transformation);
                                    }
                                }
                                break;
                        }
                    }
                });
            }
        });
    }

    function createBinChart(ctx, field, shape) {
        var binData = {
            labels: field.bins.values,
            datasets: [{
                label: field.label,
                data: field.bins.values.map(value => shape.frequencies[field.field_key][value] || 0),
                backgroundColor: field.bins.chart_options.color
            }]
        };

        new Chart(ctx, {
            type: field.bins.chart_type,
            data: binData,
            options: field.bins.chart_options
        });
    }

    function createPieChart(ctx, transformation, data) {
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['True', 'False'],
                datasets: [{
                    data: [data.true || 0, data.false || 0],
                    backgroundColor: ['#FF6384', '#36A2EB']
                }]
            },
            options: {
                title: {
                    display: true,
                    text: transformation.chart_options.title
                }
            }
        });
    }

    function createBarChart(ctx, field, transformation, data) {
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(data),
                datasets: [{
                    label: field.label,
                    data: Object.values(data),
                    backgroundColor: getColor(0).background,
                    borderColor: getColor(0).border,
                    borderWidth: 1
                }]
            },
            options: transformation.chart_options
        });
    }

    function createElevationDistributionChart(ctx, elevationData, chartConfig) {
        const altitudes = elevationData.altitudes.reverse();
        const forestData = elevationData.forest.reverse();
        const nonForestData = elevationData.non_forest.reverse();

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: altitudes,
                datasets: [
                    {
                        label: 'Forest',
                        data: forestData,
                        backgroundColor: '#4CAF50',
                        stack: 'Stack 0',
                    },
                    {
                        label: 'Non-Forest',
                        data: nonForestData,
                        backgroundColor: '#FFF59D',
                        stack: 'Stack 0',
                    }
                ]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                scales: {
                    x: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Area (ha)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString(); // Format les grands nombres
                            }
                        }
                    },
                    y: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Elevation (m)'
                        },
                        reverse: false
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                },
                layout: {
                    padding: {
                        left: 10,
                        right: 10,
                        top: 0,
                        bottom: 10
                    }
                }
            }
        });
    }

    function createForestFragmentationChart(ctx, fragmentationData, chartConfig) {
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: Object.keys(fragmentationData),
                datasets: [{
                    label: 'Cumulative Area (%)',
                    data: Object.values(fragmentationData),
                    borderColor: '#4BC0C0',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: chartConfig.chart_options.x_label
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: chartConfig.chart_options.y_label
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: chartConfig.chart_options.title
                    }
                }
            }
        });
    }

    function createGauge(options) {
        new JustGage({
            id: options.id,
            value: options.value || 0,
            min: options.min || 0,
            max: options.max,
            title: options.title,
            label: options.label,
            pointer: true,
            pointerOptions: {
                toplength: 10,
                bottomlength: 10,
                bottomwidth: 2,
                color: '#8e8e93',
                stroke: '#ffffff',
                stroke_width: 3,
                stroke_linecap: 'round'
            },
            gaugeWidthScale: 0.6,
            counter: true,
            donut: true,
            relativeGaugeSize: true,
            donutStartAngle: 270,
            hideInnerShadow: true,
            customSectors: [{
                color: "#ff0000",
                lo: 0,
                hi: options.max * 0.33
            }, {
                color: "#ffff00",
                lo: options.max * 0.33,
                hi: options.max * 0.66
            }, {
                color: "#00ff00",
                lo: options.max * 0.66,
                hi: options.max
            }],
            humanFriendly: true,
            formatNumber: true,
            textRenderer: function (val) {
                return parseFloat(val).toFixed(2);
            }
        });
    }

    // Function to get a color based on the index
    function getColor(index) {
        var colors = [
            {background: 'rgba(54, 162, 235, 0.6)', border: 'rgba(54, 162, 235, 1)'},
            {background: 'rgba(75, 192, 192, 0.6)', border: 'rgba(75, 192, 192, 1)'},
            {background: 'rgba(255, 99, 132, 0.6)', border: 'rgba(255, 99, 132, 1)'}
        ];
        return colors[index % colors.length];
    }

// Rest of the code (loadShapeTypeList, initShapeMaps, loadAllShapesMap) remains the same...

    let maps = {};  // Object to keep track of initialized maps

    function initMap(field_key, geometry) {
        const mapId = field_key + 'Map';
        const mapLoaderId = field_key + 'MapLoader';

        // Check if the map already exists
        if (maps[mapId]) {
            return; // Map is already initialized, so do nothing
        }

        const satellite = L.tileLayer.wms("https://carto10.gouv.nc/arcgis/services/fond_imagerie/MapServer/WMSServer", {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const carte = L.tileLayer.wms('https://carto.gouv.nc/arcgis/services/fond_cartographie/MapServer/WMSServer', {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const map = L.map(mapId, {
            layers: [carte, satellite],
            scrollWheelZoom: false
        });
        map.attributionControl.setPrefix(false); // Remove the "Powered by Leaflet" prefix
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        const baseMaps = {
            "Carte": carte,
            "Satellite": satellite,
        };

        L.control.layers(baseMaps).addTo(map);

        map.on('load', function () {
            document.getElementById(mapLoaderId).style.display = 'none';
        });

        if (geometry) {
            const geoJsonLayer = L.geoJSON(geometry, {
                style: function() {
                    return {
                        color: '#228b22', // Border color
                        weight: 2,       // Border width
                        fillColor: '#228b22cc', // Fill color with opacity
                        fillOpacity: 0.8 // Fill opacity
                    };
                }
            }).addTo(map);
            map.fitBounds(geoJsonLayer.getBounds());
        } else {
            console.warn("No geographic coordinates found.");
            // Set default view if no geometry is found
            map.setView([-21.291237, 165.516418], 10);
        }

        // Store the map instance in the maps object
        maps[mapId] = map;
    }

    function initShapeMaps(mapping, shape) {
        Object.entries(mapping.fields).forEach(function([field_key, field]) {
            field.transformations.forEach(function(transformation) {
                if (transformation.chart_type === 'map') {
                    var coordinatesField = transformation.chart_options.coordinates_field;
                    var geometry = shape[coordinatesField];

                    // Check if geometry is a string, if so, parse it as JSON
                    if (typeof geometry === 'string') {
                        try {
                            geometry = JSON.parse(geometry);
                        } catch (e) {
                            console.error("Invalid JSON for field", coordinatesField, ":", geometry);
                            return; // Skip this field if JSON is invalid
                        }
                    }

                    // Initialize the map with the parsed geometry
                    initMap(field_key, geometry);
                }
            });
        });
    }

    function loadAllShapesMap(currentShape) {
        const mapId = 'allShapesMap';
        const satellite = L.tileLayer.wms("https://carto10.gouv.nc/arcgis/services/fond_imagerie/MapServer/WMSServer", {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const carte = L.tileLayer.wms('https://carto.gouv.nc/arcgis/services/fond_cartographie/MapServer/WMSServer', {
            layers: '0',
            format: 'image/png',
            transparent: true,
            attribution: "<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>"
        });
        const map = L.map(mapId, {
            layers: [carte, satellite],
            scrollWheelZoom: false
        });
        map.attributionControl.setPrefix(false); // Remove the "Powered by Leaflet" prefix
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        const baseMaps = {
            "Carte": carte,
            "Satellite": satellite,
        };

        L.control.layers(baseMaps).addTo(map);

        var group = L.featureGroup(); // Create a group to hold all the layers

        shapeTypes.forEach(function(shapeTypeItem) {
            if (shapeTypeItem.type === currentShape.type) {
                shapeTypeItem.shapes.forEach(function(shapeItem) {
                    var geometry = shapeItem.geometry;
                    // No need to parse geometry if it's already GeoJSON
                    var layer = L.geoJSON(geometry, {
                        style: function() {
                            return {
                                color: '#228b22', // Border color
                                weight: 2,       // Border width
                                fillColor: '#228b22cc', // Fill color with opacity
                                fillOpacity: 0.8 // Fill opacity
                            };
                        }
                    }).addTo(map);
                    group.addLayer(layer); // Add each layer to the group

                    // Highlight current shape
                    if (shapeItem.id === currentShape.id) {
                        layer.setStyle({color: 'red', weight: 3, fillOpacity: 0.4});
                        layer.bringToFront(); // Ensure the highlighted shape is on top
                    } else {
                        layer.setStyle({fillOpacity: 0.2}); // Reduce opacity for other shapes
                    }

                    // Show tooltip on hover with additional content
                    var tooltipContent = "<strong>" + shapeItem.name + "</strong><br>";

                    


                    layer.bindTooltip(tooltipContent, {
                        permanent: false,
                        direction: 'right',
                        offset: L.point(10, 0),
                        opacity: 0.9,
                        className: 'custom-tooltip'
                    });


                    layer.on('mousemove', function(e) {
                        var tooltip = e.target.getTooltip();
                        tooltip.setLatLng(e.latlng);
                    });

                    layer.on('click', function() {
                        window.location.href = '../shape/' + shapeItem.id + '.html';
                    });
                });
            }
        });

        map.fitBounds(group.getBounds()); // Adjust the view to fit the bounds of the group

        map.attributionControl.setPrefix(false);
        map.attributionControl.addAttribution("<a href='http://www.geoportal.gouv.nc/'>Géorep</a> <i> - Gouvernement de la Nouvelle-Calédonie</i>");

        maps['allShapesMap'] = map;
    }

    function loadShapeTypeList() {
            var shapeTypeListElement = document.getElementById("shape-type-list");
            shapeTypes.forEach(function (shapeTypeItem) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = "javascript:void(0)";
                a.textContent = shapeTypeItem.type;
                a.className = "shape-type-link";
                if (shapeTypeItem.type === currentShapeType) {
                    a.classList.add("active");
                }
                a.onclick = function () {
                    if (shapeTypeItem.shapes.length > 0) {
                        // Redirect to the first shape of the selected type
                        window.location.href = "../shape/" + shapeTypeItem.shapes[0].id + ".html";
                    }
                    loadShapeList(shapeTypeItem.shapes);
                };
                li.appendChild(a);
                shapeTypeListElement.appendChild(li);
            });
        }

        function loadShapeList(shapes) {
            var shapeListElement = document.getElementById("shape-list");
            shapeListElement.innerHTML = ''; // Clear the previous list
            shapes.forEach(function (shapeItem) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = "../shape/" + shapeItem.id + ".html";
                a.textContent = shapeItem.name;
                a.className = "shape-link";
                if (shapeItem.id === shape.id) {
                    a.classList.add("active");
                }
                li.appendChild(a);
                shapeListElement.appendChild(li);
            });
        }

</script>

</body>
</html>